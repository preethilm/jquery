/*
 jqGridMobile  1.0 Beta  - jQuery Grid for mobile devices
 Copyright (c) 2012, Tony Tomov, tony@trirand.com

 license http://www.trirand.com/blog/jqgridmobile/license
*/
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{version:"1.0 Mobile Beta",htmlDecode:function(a){return a&&("&nbsp;"==a||"&#160;"==a||1===a.length&&160===a.charCodeAt(0))?"":!a?a:(""+a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(a){return!a?a:(""+a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:function(e){var c=a.makeArray(arguments).slice(1);void 0===e&&(e="");return e.replace(/\{(\d+)\}/g,
function(a,e){return c[e]})},getCellIndex:function(e){e=a(e);if(e.is("tr"))return-1;e=(!e.is("td")&&!e.is("th")?e.closest("td,th"):e)[0];return a.browser.msie?a.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(a){var a=a+"",c=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(c,""))&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):"":a},stripPref:function(e,c){var d=a.type(e);if("string"==d||"number"==d)e=""+e,c=""!==e?(""+c).replace(""+e,""):c;return c},stringToDoc:function(a){var c;
if("string"!==typeof a)return a;try{c=(new DOMParser).parseFromString(a,"text/xml")}catch(d){c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)}return c&&c.documentElement&&"parsererror"!=c.documentElement.tagName?c:null},parse:function(e){"while(1);"==e.substr(0,9)&&(e=e.substr(9));"/*"==e.substr(0,2)&&(e=e.substr(2,e.length-4));e||(e="{}");return!0===a.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(e):eval("("+e+")")},parseDate:function(e,c){var d=
{m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f,b,h;f=/[\\\/:_;.,\t\T\s-]/;if(c&&null!==c&&void 0!==c){c=a.trim(c);c=c.split(f);void 0!==a.jgrid.formatter.date.masks[e]&&(e=a.jgrid.formatter.date.masks[e]);var e=e.split(f),g=a.jgrid.formatter.date.monthNames,i=a.jgrid.formatter.date.AmPm,k=function(a,b){0===a?12===b&&(b=0):12!==b&&(b+=12);return b};f=0;for(b=e.length;f<b;f++)"M"==e[f]&&(h=a.inArray(c[f],g),-1!==h&&12>h&&(c[f]=h+1,d.m=c[f])),"F"==e[f]&&(h=a.inArray(c[f],g),-1!==h&&11<h&&(c[f]=h+1-12,d.m=c[f])),
"a"==e[f]&&(h=a.inArray(c[f],i),-1!==h&&2>h&&c[f]==i[h]&&(c[f]=h,d.h=k(c[f],d.h))),"A"==e[f]&&(h=a.inArray(c[f],i),-1!==h&&1<h&&c[f]==i[h]&&(c[f]=h-2,d.h=k(c[f],d.h))),"g"===e[f]&&(d.h=parseInt(c[f],10)),void 0!==c[f]&&(d[e[f].toLowerCase()]=parseInt(c[f],10));d.m=parseInt(d.m,10)-1;f=d.y;70<=f&&99>=f?d.y=1900+d.y:0<=f&&69>=f&&(d.y=2E3+d.y);void 0!==d.j&&(d.d=d.j);void 0!==d.n&&(d.m=parseInt(d.n,10)-1)}return new Date(d.y,d.m,d.d,d.h,d.i,d.s,d.u)},jqID:function(a){return(""+a).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,
"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e?e:a.jgrid.uidPref)+a.jgrid.guid++},getAccessor:function(a,c){var d,f,b=[],h;if("function"===typeof c)return c(a);d=a[c];if(void 0===d)try{if("string"===typeof c&&(b=c.split(".")),h=b.length)for(d=a;d&&h--;)f=b.shift(),d=d[f]}catch(g){}return d},getXmlData:function(e,c,d){var f="string"===typeof c?c.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof c)return c(e);if(f&&f[2])return f[1]?a(f[1],e).attr(f[2]):a(e).attr(f[2]);e=a(c,e);return d?
e:0<e.length?a(e).text():void 0},cellWidth:function(){var e=a("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),c=e.appendTo("body").find("td").width();e.remove();return 5!==c},ajaxOptions:{},from:function(e){return new function(e,d){"string"==typeof e&&(e=a.data(e));var f=this,b=e,h=!0,g=!1,i=d,k=/[\$,%]/g,j=null,m=null,l=0,o=!1,n="",q=[],r=!0;if("object"==typeof e&&e.push)0<e.length&&
(r="object"!=typeof e[0]?!1:!0);else throw"data provides is not an array";this._hasData=function(){return null===b?!1:0===b.length?!1:!0};this._getStr=function(a){var b=[];g&&b.push("jQuery.trim(");b.push("String("+a+")");g&&b.push(")");h||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"==typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(b){g&&(b=a.trim(b));b=b.toString().replace(/\\/g,"\\\\").replace(/\"/g,
'\\"');return h?b:b.toLowerCase()};this._funcLoop=function(d){var e=[];a.each(b,function(a,b){e.push(d(b))});return e};this._append=function(a){var b;i=null===i?"":i+(""===n?" && ":n);for(b=0;b<l;b++)i+="(";o&&(i+="!");i+="("+a+")";o=!1;n="";l=0};this._setCommand=function(a,b){j=a;m=b};this._resetNegate=function(){o=!1};this._repeatCommand=function(a,b){return null===j?f:null!==a&&null!==b?j(a,b):null===m||!r?j(a):j(m,a)};this._equals=function(a,b){return 0===f._compare(a,b,1)};this._compare=function(a,
b,d){var e=Object.prototype.toString;void 0===d&&(d=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b)return 0;if(null===a&&null!==b)return 1;if(null!==a&&null===b)return-1;if("[object Date]"===e.call(a)&&"[object Date]"===e.call(b))return a<b?-d:a>b?d:0;!h&&"number"!==typeof a&&"number"!==typeof b&&(a=(""+a).toLowerCase(),b=(""+b).toLowerCase());return a<b?-d:a>b?d:0};this._performSort=function(){0!==q.length&&(b=f._doSort(b,0))};this._doSort=function(a,b){var d=q[b].by,e=q[b].dir,
c=q[b].type,g=q[b].datefmt;if(b==q.length-1)return f._getOrder(a,d,e,c,g);b++;d=f._getGroup(a,d,e,c,g);e=[];for(c=0;c<d.length;c++)for(var g=f._doSort(d[c].items,b),i=0;i<g.length;i++)e.push(g[i]);return e};this._getOrder=function(b,d,e,c,g){var i=[],h=[],j="a"==e?1:-1,l,m;void 0===c&&(c="text");m="float"==c||"number"==c||"currency"==c||"numeric"==c?function(a){a=parseFloat((""+a).replace(k,""));return isNaN(a)?0:a}:"int"==c||"integer"==c?function(a){return a?parseFloat((""+a).replace(k,"")):0}:"date"==
c||"datetime"==c?function(b){return a.jgrid.parseDate(g,b).getTime()}:a.isFunction(c)?c:function(b){b||(b="");return a.trim((""+b).toUpperCase())};a.each(b,function(b,e){l=""!==d?a.jgrid.getAccessor(e,d):e;void 0===l&&(l="");l=m(l,e);h.push({vSort:l,index:b})});h.sort(function(a,b){a=a.vSort;b=b.vSort;return f._compare(a,b,j)});for(var c=0,n=b.length;c<n;)e=h[c].index,i.push(b[e]),c++;return i};this._getGroup=function(b,d,e,c,g){var i=[],h=null,k=null,j;a.each(f._getOrder(b,d,e,c,g),function(b,e){j=
a.jgrid.getAccessor(e,d);void 0===j&&(j="");f._equals(k,j)||(k=j,null!==h&&i.push(h),h=f._group(d,j));h.items.push(e)});null!==h&&i.push(h);return i};this.ignoreCase=function(){h=!1;return f};this.useCase=function(){h=!0;return f};this.trim=function(){g=!0;return f};this.noTrim=function(){g=!1;return f};this.execute=function(){var d=i,e=[];if(null===d)return f;a.each(b,function(){eval(d)&&e.push(this)});b=e;return f};this.data=function(){return b};this.select=function(d){f._performSort();if(!f._hasData())return[];
f.execute();if(a.isFunction(d)){var e=[];a.each(b,function(a,b){e.push(d(b))});return e}return b};this.hasMatch=function(){if(!f._hasData())return!1;f.execute();return 0<b.length};this.andNot=function(a,b,d){o=!o;return f.and(a,b,d)};this.orNot=function(a,b,d){o=!o;return f.or(a,b,d)};this.not=function(a,b,d){return f.andNot(a,b,d)};this.and=function(a,b,d){n=" && ";return void 0===a?f:f._repeatCommand(a,b,d)};this.or=function(a,b,d){n=" || ";return void 0===a?f:f._repeatCommand(a,b,d)};this.orBegin=
function(){l++;return f};this.orEnd=function(){null!==i&&(i+=")");return f};this.isNot=function(a){o=!o;return f.is(a)};this.is=function(a){f._append("this."+a);f._resetNegate();return f};this._compareValues=function(b,d,e,c,g){var i;i=r?"jQuery.jgrid.getAccessor(this,'"+d+"')":"this";void 0===e&&(e=null);var h=e,j=void 0===g.stype?"text":g.stype;if(null!==e)switch(j){case "int":case "integer":h=isNaN(Number(h))||""===h?"0":h;i="parseInt("+i+",10)";h="parseInt("+h+",10)";break;case "float":case "number":case "numeric":h=
(""+h).replace(k,"");h=isNaN(Number(h))||""===h?"0":h;i="parseFloat("+i+")";h="parseFloat("+h+")";break;case "date":case "datetime":h=""+a.jgrid.parseDate(g.newfmt||"Y-m-d",h).getTime();i='jQuery.jgrid.parseDate("'+g.srcfmt+'",'+i+").getTime()";break;default:i=f._getStr(i),h=f._getStr('"'+f._toStr(h)+'"')}f._append(i+" "+c+" "+h);f._setCommand(b,d);f._resetNegate();return f};this.equals=function(a,b,d){return f._compareValues(f.equals,a,b,"==",d)};this.notEquals=function(a,b,d){return f._compareValues(f.equals,
a,b,"!==",d)};this.isNull=function(a,b,d){return f._compareValues(f.equals,a,null,"===",d)};this.greater=function(a,b,d){return f._compareValues(f.greater,a,b,">",d)};this.less=function(a,b,d){return f._compareValues(f.less,a,b,"<",d)};this.greaterOrEquals=function(a,b,d){return f._compareValues(f.greaterOrEquals,a,b,">=",d)};this.lessOrEquals=function(a,b,d){return f._compareValues(f.lessOrEquals,a,b,"<=",d)};this.startsWith=function(b,d){var e=void 0===d||null===d?b:d,e=g?a.trim(e.toString()).length:
e.toString().length;r?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".substr(0,"+e+") == "+f._getStr('"'+f._toStr(d)+'"')):(e=g?a.trim(d.toString()).length:d.toString().length,f._append(f._getStr("this")+".substr(0,"+e+") == "+f._getStr('"'+f._toStr(b)+'"')));f._setCommand(f.startsWith,b);f._resetNegate();return f};this.endsWith=function(b,d){var e=void 0===d||null===d?b:d,e=g?a.trim(e.toString()).length:e.toString().length;r?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+b+
"')")+".substr("+f._getStr("jQuery.jgrid.getAccessor(this,'"+b+"')")+".length-"+e+","+e+') == "'+f._toStr(d)+'"'):f._append(f._getStr("this")+".substr("+f._getStr("this")+'.length-"'+f._toStr(b)+'".length,"'+f._toStr(b)+'".length) == "'+f._toStr(b)+'"');f._setCommand(f.endsWith,b);f._resetNegate();return f};this.contains=function(a,b){r?f._append(f._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+f._toStr(b)+'",0) > -1'):f._append(f._getStr("this")+'.indexOf("'+f._toStr(a)+'",0) > -1');
f._setCommand(f.contains,a);f._resetNegate();return f};this.groupBy=function(a,d,e,c){return!f._hasData()?null:f._getGroup(b,a,d,e,c)};this.orderBy=function(b,d,e,c){d=void 0===d||null===d?"a":a.trim(d.toString().toLowerCase());if(null===e||void 0===e)e="text";if(null===c||void 0===c)c="Y-m-d";if("desc"==d||"descending"==d)d="d";if("asc"==d||"ascending"==d)d="a";q.push({by:b,dir:d,type:e,datefmt:c});return f};return f}(e,null)},extend:function(e){a.extend(a.fn.jqGrid,e);this.no_legacy_api||a.fn.extend(e)}});
a.fn.jqGrid=function(e){if("string"==typeof e){var c=a.jgrid.getAccessor(a.fn.jqGrid,e);if(!c)throw"jqGrid - No such method: "+e;var d=a.makeArray(arguments).slice(1);return c.apply(this,d)}return this.each(function(){if(!this.grid){var d=a.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},
subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",
treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:9,cellLayout:5,subGridWidth:40,multiselectWidth:40,gridview:!1,
rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:1E3,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",
minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{},idPrefix:"",iScroll:{bounce:!1},scrollPaging:!1,dataTheme:"",refreshContent:!1},a.jgrid.defaults,e||{}),b=this,c,g={headers:[],cols:[],footers:[],selectionPreserver:function(b){var d=b.p,e=d.selrow,c=d.selarrrow?a.makeArray(d.selarrrow):null,f=b.grid.bDiv.scrollLeft,g=function(){var i;d.selrow=null;d.selarrrow=[];if(d.multiselect&&c&&0<c.length)for(i=0;i<c.length;i++)c[i]!=e&&a(b).jqGrid("setSelection",c[i],!1,null);e&&a(b).jqGrid("setSelection",
e,!1,null);b.grid.bDiv.scrollLeft=f;a(b).unbind(".selectionPreserver",g)};a(b).bind("jqGridGridComplete.selectionPreserver",g)}};if("TABLE"!=this.tagName.toUpperCase())alert("Element is not a table");else if(void 0!==document.documentMode&&5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{a(this).empty().attr("tabindex","1");this.p=d;this.p.useProp=!!a.fn.prop;var i,k;if(0===this.p.colNames.length)for(i=0;i<this.p.colModel.length;i++)this.p.colNames[i]=this.p.colModel[i].label||
this.p.colModel[i].name;if(this.p.colNames.length!==this.p.colModel.length)alert(a.jgrid.errors.model);else{var j=a("<div class='ui-jqgrid-view'></div>"),m=a.browser.msie?!0:!1;b.p.direction=a.trim(b.p.direction.toLowerCase());-1==a.inArray(b.p.direction,["ltr","rtl"])&&(b.p.direction="ltr");k=b.p.direction;a(j).insertBefore(this);a(this).appendTo(j);var l=a("<div class='ui-jqgrid ui-corner-all'></div>");a(l).insertBefore(j).attr({id:"gbox_"+this.id,dir:k});a(j).appendTo(l).attr("id","gview_"+this.id);
a("<div class='ui-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append("").insertBefore(j);a("<div class='loading ui-btn-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(j);a(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});d=a(this).closest("div:jqmData(role='page')");b.p.dataTheme||(b.p.dataTheme="b",d.length&&d.attr("data-theme")&&(b.p.dataTheme=d.attr("data-theme")));
var o=function(a,b){a=parseInt(a,10);return isNaN(a)?b?b:0:a},n=function(d,e,c,f,i,h){var t=b.p.colModel[d],u=t.align,p='style="',k=t.classes,j=t.name,l=[];u&&(p=p+("text-align:"+u+";"));t.hidden===true&&(p=p+"display:none;");if(e===0)p=p+("width: "+g.headers[d].width+"px;");else if(t.cellattr&&a.isFunction(t.cellattr))if((d=t.cellattr.call(b,i,c,f,t,h))&&typeof d==="string"){d=d.replace(/style/i,"style").replace(/title/i,"title");if(d.indexOf("title")>-1)t.title=false;d.indexOf("class")>-1&&(k=void 0);
l=d.split("style");if(l.length===2){l[1]=a.trim(l[1].replace("=",""));if(l[1].indexOf("'")===0||l[1].indexOf('"')===0)l[1]=l[1].substring(1);p=p+l[1].replace(/'/gi,'"')}else p=p+'"'}if(!l.length){l[0]="";p=p+'"'}p=p+((k!==void 0?' class="'+k+'"':"")+(t.title&&c?' title="'+a.jgrid.stripHtml(c)+'"':""));p=p+(' aria-describedby="'+b.p.id+"_"+j+'"');return p+l[0]},q=function(d){return d===void 0||d===null||d===""?"&#160;":b.p.autoencode?a.jgrid.htmlEncode(d):d+""},r=function(d,e,c,f,g){var i=b.p.colModel[c];
if(typeof i.formatter!=="undefined"){d={rowId:d,colModel:i,gid:b.p.id,pos:c};e=a.isFunction(i.formatter)?i.formatter.call(b,e,d,f,g):a.fmatter?a.fn.fmatter.call(b,i.formatter,e,d,f,g):q(e)}else e=q(e);return e},v=function(a,b,d,e,c,f){b=r(a,b,d,c,"add");return'<td role="gridcell" '+n(d,e,b,c,a,f)+">"+b+"</td>"},G=function(a,d,e){var c='<input data-role="none" data-role="none" data-theme="'+b.p.dataTheme+'" role="checkbox" type="checkbox" id="jqg_'+b.p.id+"_"+a+'" class="cbox" name="jqg_'+b.p.id+"_"+
a+'"/>';return'<td role="gridcell" '+n(d,e,"",null,a,true)+">"+c+"</td>"},Q=function(a,b,d,e){d=(parseInt(d,10)-1)*parseInt(e,10)+1+b;return'<td role="gridcell" class="jqgrid-rownum" '+n(a,b,d,null,b,true)+">"+d+"</td>"},O=function(a){var d,e=[],c=0,f;for(f=0;f<b.p.colModel.length;f++){d=b.p.colModel[f];if(d.name!=="cb"&&d.name!=="subgrid"&&d.name!=="rn"){e[c]=a=="local"?d.name:a=="xml"||a==="xmlstring"?d.xmlmap||d.name:d.jsonmap||d.name;c++}}return e},P=function(d){var e=b.p.remapColumns;if(!e||
!e.length)e=a.map(b.p.colModel,function(a,b){return b});d&&(e=a.map(e,function(a){return a<d?null:a-d}));return e},J=function(b,d){var e;if(this.p.deepempty)a(this.rows).slice(1).remove();else{e=this.rows.length>0?this.rows[0]:null;a(this.firstChild).empty().append(e)}if(d===true&&this.p.treeGrid){this.p.data=[];this.p._index={}}},B=function(){var d=b.p.data.length,e,c,f;e=b.p.rownumbers===true?1:0;c=b.p.multiselect===true?1:0;f=b.p.subGrid===true?1:0;e=b.p.keyIndex===false||b.p.loadonce===true?b.p.localReader.id:
b.p.colModel[b.p.keyIndex+c+f+e].name;for(c=0;c<d;c++){f=a.jgrid.getAccessor(b.p.data[c],e);b.p._index[f]=c}},H=function(d,e,c,f,g){var i="-1",t="",h,e=e?"display:none;":"",c="jqgrow ui-row-"+b.p.direction+c,f=a.isFunction(b.p.rowattr)?b.p.rowattr.call(b,f,g):{};if(!a.isEmptyObject(f)){if(f.hasOwnProperty("id")){d=f.id;delete f.id}if(f.hasOwnProperty("tabindex")){i=f.tabindex;delete f.tabindex}if(f.hasOwnProperty("style")){e=e+f.style;delete f.style}if(f.hasOwnProperty("class")){c=c+(" "+f["class"]);
delete f["class"]}try{delete f.role}catch(u){}for(h in f)f.hasOwnProperty(h)&&(t=t+(" "+h+"="+f[h]))}return'<tr role="row" id="'+d+'" tabindex="'+i+'" class="'+c+'"'+(e===""?"":' style="'+e+'"')+t+">"},I=function(d,e,c,f,g){var i=new Date,t=b.p.datatype!="local"&&b.p.loadonce||b.p.datatype=="xmlstring",h=b.p.xmlReader,u=b.p.datatype=="local"?"local":"xml";if(t){b.p.data=[];b.p._index={};b.p.localReader.id="_id_"}b.p.reccount=0;if(a.isXMLDoc(d)){if(b.p.treeANode===-1&&!b.p.scroll){J.call(b,false,true);
c=1}else c=c>1?c:1;var p,k,j=0,l,m=b.p.multiselect===true?1:0,y=b.p.subGrid===true?1:0,n=b.p.rownumbers===true?1:0,z,o=[],q,r={},K,x,s=[],W=b.p.altRows===true?" "+b.p.altclass:"",B;h.repeatitems||(o=O(u));z=b.p.keyIndex===false?a.isFunction(h.id)?h.id.call(b,d):h.id:b.p.keyIndex;if(o.length>0&&!isNaN(z)){b.p.remapColumns&&b.p.remapColumns.length&&(z=a.inArray(z,b.p.remapColumns));z=o[z]}u=(z+"").indexOf("[")===-1?o.length?function(b,d){return a(z,b).text()||d}:function(b,d){return a(h.cell,b).eq(z).text()||
d}:function(a,b){return a.getAttribute(z.replace(/[\[\]]/g,""))||b};b.p.userData={};b.p.page=a.jgrid.getXmlData(d,h.page)||b.p.page||0;b.p.lastpage=a.jgrid.getXmlData(d,h.total);if(b.p.lastpage===void 0)b.p.lastpage=1;b.p.records=a.jgrid.getXmlData(d,h.records)||0;a.isFunction(h.userdata)?b.p.userData=h.userdata.call(b,d)||{}:a.jgrid.getXmlData(d,h.userdata,true).each(function(){b.p.userData[this.getAttribute("name")]=a(this).text()});d=a.jgrid.getXmlData(d,h.root,true);(d=a.jgrid.getXmlData(d,h.row,
true))||(d=[]);var w=d.length,C=0,I=[],N=parseInt(b.p.rowNum,10);if(w>0&&b.p.page<=0)b.p.page=1;if(d&&w){var E=b.p.scroll?a.jgrid.randId():1;g&&(N=N*(g+1));for(var g=a.isFunction(b.p.afterInsertRow),A=b.p.grouping&&b.p.groupingView.groupCollapse===true;C<w;){K=d[C];x=u(K,E+C);x=b.p.idPrefix+x;p=c===0?0:c+1;B=(p+C)%2==1?W:"";var D=s.length;s.push("");n&&s.push(Q(0,C,b.p.page,b.p.rowNum));m&&s.push(G(x,n,C));y&&s.push(a(b).jqGrid("addSubGridCell",m+n,C+c));if(h.repeatitems){q||(q=P(m+y+n));var F=a.jgrid.getXmlData(K,
h.cell,true);a.each(q,function(a){var d=F[this];if(!d)return false;l=d.textContent||d.text;r[b.p.colModel[a+m+y+n].name]=l;s.push(v(x,l,a+m+y+n,C+c,K,r))})}else for(p=0;p<o.length;p++){l=a.jgrid.getXmlData(K,o[p]);r[b.p.colModel[p+m+y+n].name]=l;s.push(v(x,l,p+m+y+n,C+c,K,r))}s[D]=H(x,A,B,r,K);s.push("</tr>");if(b.p.grouping){I=a(b).jqGrid("groupingPrepare",s,I,r,C);s=[]}if(t||b.p.treeGrid===true){r._id_=x;b.p.data.push(r);b.p._index[x]=b.p.data.length-1}if(b.p.gridview===false){a("tbody:first",e).append(s.join(""));
a(b).triggerHandler("jqGridAfterInsertRow",[x,r,K]);g&&b.p.afterInsertRow.call(b,x,r,K);s=[]}r={};j++;C++;if(j==N)break}}if(b.p.gridview===true){k=b.p.treeANode>-1?b.p.treeANode:0;if(b.p.grouping){a(b).jqGrid("groupingRender",I,b.p.colModel.length);I=null}else b.p.treeGrid===true&&k>0?a(b.rows[k]).after(s.join("")):a("tbody:first",e).append(s.join(""))}if(b.p.subGrid===true)try{a(b).jqGrid("addSubGrid",m+n)}catch(V){}b.p.totaltime=new Date-i;if(j>0&&b.p.records===0)b.p.records=w;s=null;if(b.p.treeGrid===
true)try{a(b).jqGrid("setTreeNode",k+1,j+k+1)}catch(L){}if(!b.p.treeGrid&&!b.p.scroll)b.grid.bDiv.scrollTop=0;b.p.reccount=j;b.p.treeANode=-1;b.p.userDataOnFooter&&a(b).jqGrid("footerData","set",b.p.userData,true);if(t){b.p.records=w;b.p.lastpage=Math.ceil(w/N)}f||b.updatepager(false,true);if(t)for(;j<w;){K=d[j];x=u(K,j+E);x=b.p.idPrefix+x;if(h.repeatitems){q||(q=P(m+y+n));var M=a.jgrid.getXmlData(K,h.cell,true);a.each(q,function(a){var d=M[this];if(!d)return false;l=d.textContent||d.text;r[b.p.colModel[a+
m+y+n].name]=l})}else for(p=0;p<o.length;p++){l=a.jgrid.getXmlData(K,o[p]);r[b.p.colModel[p+m+y+n].name]=l}r._id_=x;b.p.data.push(r);b.p._index[x]=b.p.data.length-1;r={};j++}}},E=function(d,e,c,f,g){e=new Date;if(d){if(b.p.treeANode===-1&&!b.p.scroll){J.call(b,false,true);c=1}else c=c>1?c:1;var h,i,t=b.p.datatype!="local"&&b.p.loadonce||b.p.datatype=="jsonstring";if(t){b.p.data=[];b.p._index={};b.p.localReader.id="_id_"}b.p.reccount=0;if(b.p.datatype=="local"){h=b.p.localReader;i="local"}else{h=b.p.jsonReader;
i="json"}var u=0,p,k,j=[],l,m=b.p.multiselect?1:0,y=b.p.subGrid?1:0,n=b.p.rownumbers===true?1:0,z,o,r={},q,s,x=[],W=b.p.altRows===true?" "+b.p.altclass:"",C;b.p.page=a.jgrid.getAccessor(d,h.page)||b.p.page||0;z=a.jgrid.getAccessor(d,h.total);b.p.lastpage=z===void 0?1:z;b.p.records=a.jgrid.getAccessor(d,h.records)||0;b.p.userData=a.jgrid.getAccessor(d,h.userdata)||{};h.repeatitems||(l=j=O(i));i=b.p.keyIndex===false?a.isFunction(h.id)?h.id.call(b,d):h.id:b.p.keyIndex;if(j.length>0&&!isNaN(i)){b.p.remapColumns&&
b.p.remapColumns.length&&(i=a.inArray(i,b.p.remapColumns));i=j[i]}(o=a.jgrid.getAccessor(d,h.root))||(o=[]);z=o.length;d=0;if(z>0&&b.p.page<=0)b.p.page=1;var B=parseInt(b.p.rowNum,10),w=b.p.scroll?a.jgrid.randId():1;g&&(B=B*(g+1));for(var I=a.isFunction(b.p.afterInsertRow),N=[],E=b.p.grouping&&b.p.groupingView.groupCollapse===true;d<z;){g=o[d];s=a.jgrid.getAccessor(g,i);if(s===void 0){s=w+d;if(j.length===0&&h.cell){p=a.jgrid.getAccessor(g,h.cell);s=p!==void 0?p[i]||s:s}}s=b.p.idPrefix+s;p=c===1?0:
c;C=(p+d)%2==1?W:"";var A=x.length;x.push("");n&&x.push(Q(0,d,b.p.page,b.p.rowNum));m&&x.push(G(s,n,d));y&&x.push(a(b).jqGrid("addSubGridCell",m+n,d+c));if(h.repeatitems){h.cell&&(g=a.jgrid.getAccessor(g,h.cell));l||(l=P(m+y+n))}for(k=0;k<l.length;k++){p=a.jgrid.getAccessor(g,l[k]);r[b.p.colModel[k+m+y+n].name]=p;x.push(v(s,p,k+m+y+n,d+c,g,r))}x[A]=H(s,E,C,r,g);x.push("</tr>");if(b.p.grouping){N=a(b).jqGrid("groupingPrepare",x,N,r,d);x=[]}if(t||b.p.treeGrid===true){r._id_=s;b.p.data.push(r);b.p._index[s]=
b.p.data.length-1}if(b.p.gridview===false){a("#"+a.jgrid.jqID(b.p.id)+" tbody:first").append(x.join(""));a(b).triggerHandler("jqGridAfterInsertRow",[s,r,g]);I&&b.p.afterInsertRow.call(b,s,r,g);x=[]}r={};u++;d++;if(u==B)break}if(b.p.gridview===true){q=b.p.treeANode>-1?b.p.treeANode:0;b.p.grouping?a(b).jqGrid("groupingRender",N,b.p.colModel.length):b.p.treeGrid===true&&q>0?a(b.rows[q]).after(x.join("")):a("#"+a.jgrid.jqID(b.p.id)+" tbody:first").append(x.join(""))}if(b.p.subGrid===true)try{a(b).jqGrid("addSubGrid",
m+n)}catch(D){}b.p.totaltime=new Date-e;if(u>0&&b.p.records===0)b.p.records=z;if(b.p.treeGrid===true)try{a(b).jqGrid("setTreeNode",q+1,u+q+1)}catch(F){}if(!b.p.treeGrid&&!b.p.scroll)b.grid.bDiv.scrollTop=0;b.p.reccount=u;b.p.treeANode=-1;b.p.userDataOnFooter&&a(b).jqGrid("footerData","set",b.p.userData,true);if(t){b.p.records=z;b.p.lastpage=Math.ceil(z/B)}f||b.updatepager(false,true);if(t)for(;u<z&&o[u];){g=o[u];s=a.jgrid.getAccessor(g,i);if(s===void 0){s=w+u;j.length===0&&h.cell&&(s=a.jgrid.getAccessor(g,
h.cell)[i]||s)}if(g){s=b.p.idPrefix+s;if(h.repeatitems){h.cell&&(g=a.jgrid.getAccessor(g,h.cell));l||(l=P(m+y+n))}for(k=0;k<l.length;k++){p=a.jgrid.getAccessor(g,l[k]);r[b.p.colModel[k+m+y+n].name]=p}r._id_=s;b.p.data.push(r);b.p._index[s]=b.p.data.length-1;r={}}u++}}},Z=function(){function d(e){var c=0,g,h,i,t,u;if(e.groups!==void 0){(h=e.groups.length&&e.groupOp.toString().toUpperCase()==="OR")&&m.orBegin();for(g=0;g<e.groups.length;g++){c>0&&h&&m.or();try{d(e.groups[g])}catch(p){alert(p)}c++}h&&
m.orEnd()}if(e.rules!==void 0){if(c>0){h=m.select();m=a.jgrid.from(h);b.p.ignoreCase&&(m=m.ignoreCase())}try{(i=e.rules.length&&e.groupOp.toString().toUpperCase()==="OR")&&m.orBegin();for(g=0;g<e.rules.length;g++){u=e.rules[g];t=e.groupOp.toString().toUpperCase();if(l[u.op]&&u.field){c>0&&t&&t==="OR"&&(m=m.or());m=l[u.op](m,t)(u.field,u.data,f[u.field])}c++}i&&m.orEnd()}catch(k){alert(k)}}}var e,c=false,f={},g=[],h=[],i,t,u;if(a.isArray(b.p.data)){var p=b.p.grouping?b.p.groupingView:false,k,j;a.each(b.p.colModel,
function(){t=this.sorttype||"text";if(t=="date"||t=="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"){i=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:a.jgrid.formatter.date.srcformat;u=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:a.jgrid.formatter.date.newformat}else i=u=this.datefmt||"Y-m-d";f[this.name]={stype:t,srcfmt:i,newfmt:u}}else f[this.name]={stype:t,srcfmt:"",newfmt:""};if(b.p.grouping){j=
0;for(k=p.groupField.length;j<k;j++)if(this.name==p.groupField[j]){var d=this.name;if(typeof this.index!="undefined")d=this.index;g[j]=f[d];h[j]=d}}if(!c&&(this.index==b.p.sortname||this.name==b.p.sortname)){e=this.name;c=true}});if(b.p.treeGrid)a(b).jqGrid("SortTree",e,b.p.sortorder,f[e].stype,f[e].srcfmt);else{var l={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},
cn:function(a){return a.contains},nc:function(a,b){return b==="OR"?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return b==="OR"?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return b==="OR"?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return b==="OR"?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return b==="OR"?a.orNot().isNull:
a.andNot().isNull}},m=a.jgrid.from(b.p.data);b.p.ignoreCase&&(m=m.ignoreCase());if(b.p.search===true){var y=b.p.postData.filters;if(y){typeof y=="string"&&(y=a.jgrid.parse(y));d(y)}else try{m=l[b.p.postData.searchOper](m)(b.p.postData.searchField,b.p.postData.searchString,f[b.p.postData.searchField])}catch(n){}}if(b.p.grouping)for(j=0;j<k;j++)m.orderBy(h[j],p.groupOrder[j],g[j].stype,g[j].srcfmt);e&&b.p.sortorder&&c&&(b.p.sortorder.toUpperCase()=="DESC"?m.orderBy(b.p.sortname,"d",f[e].stype,f[e].srcfmt):
m.orderBy(b.p.sortname,"a",f[e].stype,f[e].srcfmt));var y=m.select(),z=parseInt(b.p.rowNum,10),r=y.length,o=parseInt(b.p.page,10),s=Math.ceil(r/z),v={},y=y.slice((o-1)*z,o*z),f=m=null;v[b.p.localReader.total]=s;v[b.p.localReader.page]=o;v[b.p.localReader.records]=r;v[b.p.localReader.root]=y;v[b.p.localReader.userdata]=b.p.userData;y=null;return v}}},R=function(){b.grid.hDiv.loading=true;if(!b.p.hiddengrid)switch(b.p.loadui){case "enable":a("#load_"+a.jgrid.jqID(b.p.id)).show();break;case "block":a("#lui_"+
a.jgrid.jqID(b.p.id)).show();a("#load_"+a.jgrid.jqID(b.p.id)).show()}},F=function(){b.grid.hDiv.loading=false;c&&setTimeout(function(){c.refresh()},0);switch(b.p.loadui){case "enable":a("#load_"+a.jgrid.jqID(b.p.id)).hide();break;case "block":a("#lui_"+a.jgrid.jqID(b.p.id)).hide();a("#load_"+a.jgrid.jqID(b.p.id)).hide()}},u=function(d){if(!b.grid.hDiv.loading){var e=b.p.scroll&&d===false,c={},f,g=b.p.prmNames;if(b.p.page<=0)b.p.page=1;if(g.search!==null)c[g.search]=b.p.search;g.nd!==null&&(c[g.nd]=
(new Date).getTime());if(g.rows!==null)c[g.rows]=b.p.rowNum;if(g.page!==null)c[g.page]=b.p.page;if(g.sort!==null)c[g.sort]=b.p.sortname;if(g.order!==null)c[g.order]=b.p.sortorder;if(b.p.rowTotal!==null&&g.totalrows!==null)c[g.totalrows]=b.p.rowTotal;var h=a.isFunction(b.p.loadComplete),i=h?b.p.loadComplete:null,t=0,d=d||1;if(d>1){c[g.page]=d;if(g.npage!==null){c[g.npage]=d;t=d-1;d=1}else i=function(a){b.p.page++;b.grid.hDiv.loading=false;h&&b.p.loadComplete.call(b,a);u(d-1)}}else g.npage!==null&&
delete b.p.postData[g.npage];if(b.p.grouping){a(b).jqGrid("groupingSetup");var p=b.p.groupingView,k,j="";for(k=0;k<p.groupField.length;k++){var l=p.groupField[k];a.each(b.p.colModel,function(a,b){if(b.name==l&&b.index)l=b.index});j=j+(l+" "+p.groupOrder[k]+", ")}c[g.sort]=j+c[g.sort]}c[g.npage]=d;a.extend(true,b.p.postData,c);var m=!b.p.scroll?1:b.rows.length-1,c=a(b).triggerHandler("jqGridBeforeRequest");if(!(c===false||c==="stop"))if(a.isFunction(b.p.datatype))b.p.datatype.call(b,b.p.postData,"load_"+
b.p.id);else{if(a.isFunction(b.p.beforeRequest)){c=b.p.beforeRequest.call(b);c===void 0&&(c=true);if(c===false)return}f=b.p.datatype.toLowerCase();switch(f){case "json":case "jsonp":case "xml":case "script":a.ajax(a.extend({url:b.p.url,type:b.p.mtype,dataType:f,data:a.isFunction(b.p.serializeGridData)?b.p.serializeGridData.call(b,b.p.postData):b.p.postData,success:function(c,g,h){if(!(a.isFunction(b.p.beforeProcessing)&&b.p.beforeProcessing.call(b,c,g,h)===false)){f==="xml"?I(c,b.grid.bDiv,m,d>1,
t):E(c,b.grid.bDiv,m,d>1,t);a(b).triggerHandler("jqGridLoadComplete",[c]);i&&i.call(b,c);a(b).triggerHandler("jqGridAfterLoadComplete",[c]);e&&b.grid.populateVisible();if(b.p.loadonce||b.p.treeGrid)b.p.datatype="local"}F()},error:function(d,e,c){a.isFunction(b.p.loadError)&&b.p.loadError.call(b,d,e,c);F()},beforeSend:function(d,e){var c=true;a.isFunction(b.p.loadBeforeSend)&&(c=b.p.loadBeforeSend.call(b,d,e));c===void 0&&(c=true);if(c===false)return false;R()}},a.jgrid.ajaxOptions,b.p.ajaxGridOptions));
break;case "xmlstring":R();c=a.jgrid.stringToDoc(b.p.datastr);I(c,b.grid.bDiv);a(b).triggerHandler("jqGridLoadComplete",[c]);h&&b.p.loadComplete.call(b,c);a(b).triggerHandler("jqGridAfterLoadComplete",[c]);b.p.datatype="local";b.p.datastr=null;F();break;case "jsonstring":R();c=typeof b.p.datastr=="string"?a.jgrid.parse(b.p.datastr):b.p.datastr;E(c,b.grid.bDiv);a(b).triggerHandler("jqGridLoadComplete",[c]);h&&b.p.loadComplete.call(b,c);a(b).triggerHandler("jqGridAfterLoadComplete",[c]);b.p.datatype=
"local";b.p.datastr=null;F();break;case "local":case "clientside":R();b.p.datatype="local";c=Z();E(c,b.grid.bDiv,m,d>1,t);a(b).triggerHandler("jqGridLoadComplete",[c]);i&&i.call(b,c);a(b).triggerHandler("jqGridAfterLoadComplete",[c]);e&&b.grid.populateVisible();F()}}}},t=function(d){a("#cb_"+a.jgrid.jqID(b.p.id),b.grid.hDiv)[b.p.useProp?"prop":"attr"]("checked",d);if(b.p.frozenColumns&&b.p.id+"_frozen")a("#cb_"+a.jgrid.jqID(b.p.id),b.grid.fhDiv)[b.p.useProp?"prop":"attr"]("checked",d)},p=function(d,
e){var c="",f="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;width:100%;' class='ui-pg-table'><tbody><tr>",g,h,i,p,j=function(d){var e;a.isFunction(b.p.onPaging)&&(e=b.p.onPaging.call(b,d));b.p.selrow=null;if(b.p.multiselect){b.p.selarrrow=[];t(false)}b.p.savedRow=[];return e=="stop"?false:true},d=d.substr(1),e=e+("_"+d);g="pg_"+d;h=d+"_left";i=d+"_center";p=d+"_right";a("#"+a.jgrid.jqID(d)).append("<div id='"+g+"' class='ui-pager-control' role='group' data-role='footer' data-theme='"+
b.p.dataTheme+"'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+h+"' align='left'></td><td id='"+i+"' align='center' style='white-space:pre;'></td><td id='"+p+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");h="";if(b.p.rowList.length>0){h="<tr><td><label for=\"select-choice-1\" class=\"select\" data-inline=\"true\"></label>Records per page</td><td><select data-mini='true' name='select-choice-1' id='select-choice-1' class='ui-pg-selbox'>";
for(i=0;i<b.p.rowList.length;i++)h=h+('<option role="option" value="'+b.p.rowList[i]+'"'+(b.p.rowNum==b.p.rowList[i]?' selected="selected"':"")+">"+b.p.rowList[i]+"</option>");h=h+"</select></td></tr>"}k=="rtl"&&(f=f+"");b.p.pginput===true&&(c="<td dir='"+k+'\'style="text-align:center"><a class="pagersettings" href="#" data-rel="popup" data-role="button" data-inline="true" data-transition="pop" data-iconpos="notext" data-icon="gear" style="top:-6px;"></a></td>');if(b.p.pgbuttons===true){i=["first"+
e,"prev"+e,"next"+e,"last"+e];k=="rtl"&&i.reverse();f=f+("<td id='"+i[1]+"' style='text-align:center'><a href='#' data-iconpos='notext' data-icon='arrow-l' data-mini='true' data-role='button' style='top:-6px;' data-inline='true'></a></td>");f=f+(c!==""?"<td class='' style='width:4px;'></span></td>"+c+"<td class='' style='width:4px;'></span></td>":"")+("<td id='"+i[2]+"' style='text-align:center'><a href='#' data-iconpos='notext' data-icon='arrow-r' data-mini='true' data-role='button' style='top:-6px;' data-inline='true'></a></td>")}else c!==
""&&(f=f+c);k=="ltr"&&(f=f+"");f=f+"</tr></tbody></table>";b.p.viewrecords===true&&a("td#"+d+"_"+b.p.recordpos,"#"+g).append("<div dir='"+k+"' style='text-align:"+b.p.recordpos+"' class='ui-paging-info'></div>");a("td#"+d+"_"+b.p.pagerpos,"#"+g).append(f);c=a(".ui-jqgrid").css("font-size")||"11px";a(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+c+";visibility:hidden;' ></div>");f=a(f).clone().appendTo("#testpg").width();a("#testpg").remove();
b.p._nvtd=[];b.p._nvtd[0]=f?Math.floor((b.p.width-f)/2):Math.floor(b.p.width/3);b.p._nvtd[1]=0;f=null;b.p.pgbuttons===true&&a("#first"+a.jgrid.jqID(e)+", #prev"+a.jgrid.jqID(e)+", #next"+a.jgrid.jqID(e)+", #last"+a.jgrid.jqID(e)).click(function(){var a=o(b.p.page,1),d=o(b.p.lastpage,1),c=false,f=true,g=true,h=true,i=true;if(d===0||d===1)i=h=g=f=false;else if(d>1&&a>=1)if(a===1)g=f=false;else{if(a===d)i=h=false}else if(d>1&&a===0){i=h=false;a=d-1}if(this.id==="first"+e&&f){b.p.page=1;c=true}if(this.id===
"prev"+e&&g){b.p.page=a-1;c=true}if(this.id==="next"+e&&h){b.p.page=a+1;c=true}if(this.id==="last"+e&&i){b.p.page=d;c=true}if(c){if(!j(this.id))return false;u()}return false});if(b.p.pginput===true){a("#"+d).before('<div data-role="popup"  data-position-to="#gbox_'+b.p.id+'" data-overlay-theme="a" data-theme="'+b.p.dataTheme+'" style="min-width:200px;" class="ui-corner-all" id="pgpop_'+d+'"><div data-role="header" data-theme="'+b.p.dataTheme+'" class="ui-corner-top"><h1>Grid::Page Settings</h1></div><table style="width:100%"><tr><td style="width:28%"><label for="slider-1">Page: </label></td><td "width:72%"><input id="slider-1" name="slider-1" type="range" class="ui-pg-input" type="text" size="2" maxlength="7" value="0" role="textbox" style="width:29px;height:30px" min="1" max="5"/></td></tr>'+
h+'</table><div style="text-align:right"><a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="'+b.p.dataTheme+'">Cancel</a><a class="setpage" href="#" data-role="button" data-inline="true" data-transition="flow" data-theme="'+b.p.dataTheme+'">Update</a></div></div>');a(".pagersettings","#"+d).click(function(){a("#slider-1").val(b.p.page).attr("max",b.p.lastpage).slider("refresh");a("#select-choice-1").val(b.p.rowNum).selectmenu("refresh");a("#pgpop_"+d).popup("open")});a(".setpage",
"#pgpop_"+d).click(function(){var e=parseInt(a("#slider-1").val(),10),c=parseInt(a("#select-choice-1").val(),10);if(isNaN(c))c=b.p.rowNum;isNaN(e)&&(e=1);b.p.page=e>0?e:b.p.page;b.p.page=e>b.p.lastpage?b.p.lastpage:b.p.page;b.p.page=Math.round(b.p.rowNum*(b.p.page-1)/c-0.5)+1;b.p.rowNum=c;if(!j("user"))return false;u();a("#pgpop_"+d).popup("close");return false})}},y=function(d,e,c,f){if(b.p.colModel[e].sortable&&!(b.p.savedRow.length>0)){if(!c){if(b.p.lastsort==e)if(b.p.sortorder=="asc")b.p.sortorder=
"desc";else{if(b.p.sortorder=="desc")b.p.sortorder="asc"}else b.p.sortorder=b.p.colModel[e].firstsortorder||"asc";b.p.page=1}if(f){if(b.p.lastsort==e&&b.p.sortorder==f&&!c)return;b.p.sortorder=f}c=b.grid.headers[b.p.lastsort].el;f=b.grid.headers[e].el;a("a.ui-grid-ico-sort",c).hide();a(c).attr("aria-selected","false");a("a.ui-icon-"+b.p.sortorder,f).show();a(f).attr("aria-selected","true");if(!b.p.viewsortcols[0]&&b.p.lastsort!=e){a("span.s-ico",c).hide();a("span.s-ico",f).show()}d=d.substring(5+
b.p.id.length+1);b.p.sortname=b.p.colModel[e].index||d;c=b.p.sortorder;if(a(b).triggerHandler("jqGridSortCol",[d,e,c])==="stop")b.p.lastsort=e;else if(a.isFunction(b.p.onSortCol)&&b.p.onSortCol.call(b,d,e,c)=="stop")b.p.lastsort=e;else{if(b.p.datatype=="local")b.p.deselectAfterSort&&a(b).jqGrid("resetSelection");else{b.p.selrow=null;b.p.multiselect&&t(false);b.p.selarrrow=[];b.p.savedRow=[]}if(b.p.scroll){c=b.grid.bDiv.scrollLeft;J.call(b,true,false);b.grid.hDiv.scrollLeft=c}b.p.subGrid&&b.p.datatype==
"local"&&a("td.sgexpanded","#"+a.jgrid.jqID(b.p.id)).each(function(){a(this).trigger("click")});u();b.p.lastsort=e;if(b.p.sortname!=d&&e)b.p.lastsort=e}}};this.p.id=this.id;-1==a.inArray(b.p.multikey,["shiftKey","altKey","ctrlKey"])&&(b.p.multikey=!1);b.p.keyIndex=!1;for(i=0;i<b.p.colModel.length;i++)b.p.colModel[i]=a.extend(!0,{},b.p.cmTemplate,b.p.colModel[i].template||{},b.p.colModel[i]),!1===b.p.keyIndex&&!0===b.p.colModel[i].key&&(b.p.keyIndex=i);b.p.sortorder=b.p.sortorder.toLowerCase();!0===
b.p.grouping&&(b.p.scroll=!1,b.p.rownumbers=!1,b.p.treeGrid=!1,b.p.gridview=!0);if(!0===this.p.treeGrid){try{a(this).jqGrid("setTreeGrid")}catch(z){}"local"!=b.p.datatype&&(b.p.localReader={id:"_id_"})}if(this.p.subGrid)try{a(b).jqGrid("setSubGrid")}catch(W){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox' style='left:33%; border: 1px solid;'/>"),this.p.colModel.unshift({name:"cb",width:a.jgrid.cellWidth()?b.p.multiselectWidth+
b.p.cellLayout:b.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:b.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));b.p.xmlReader=a.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},
b.p.xmlReader);b.p.jsonReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},b.p.jsonReader);b.p.localReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},b.p.localReader);b.p.scroll&&(b.p.pgbuttons=!1,b.p.pginput=!1,b.p.rowList=[]);b.p.data.length&&
B();var s="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",N,C,V,X,A,w,$;if(!0===b.p.shrinkToFit&&!0===b.p.forceFit)for(i=b.p.colModel.length-1;0<=i;i--)if(!b.p.colModel[i].hidden){b.p.colModel[i].resizable=!1;break}N=m?"class='ui-th-div-ie'":"";$="<span class='s-ico' style='display:none;float:left;'><a href='#' data-iconpos='notext' data-icon='arrow-u' data-mini='true' data-role='button' sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-sort-"+k+"' style='display:none;'></a>"+("<a href='#' data-iconpos='notext' data-inline='true' data-mini='true' data-role='button' data-icon='arrow-d' sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-sort-"+
k+"' style='display:none;'></span></span>");for(i=0;i<this.p.colNames.length;i++)C=b.p.headertitles?' title="'+a.jgrid.stripHtml(b.p.colNames[i])+'"':"",s+="<th id='"+b.p.id+"_"+b.p.colModel[i].name+"' role='columnheader' class='ui-th-column ui-th-"+k+"'"+C+">",C=b.p.colModel[i].index||b.p.colModel[i].name,s+="<div id='jqgh_"+b.p.id+"_"+b.p.colModel[i].name+"' "+N+">"+b.p.colNames[i],b.p.colModel[i].width=b.p.colModel[i].width?parseInt(b.p.colModel[i].width,10):150,"boolean"!==typeof b.p.colModel[i].title&&
(b.p.colModel[i].title=!0),C==b.p.sortname&&(b.p.lastsort=i),s+=$+"</div></th>";$=null;a(this).append(s+"</tr></thead>");if(this.p.multiselect){var Y=[],T;a("#cb_"+a.jgrid.jqID(b.p.id),this).bind("click",function(){b.p.selarrrow=[];var d=b.p.frozenColumns===true?b.p.id+"_frozen":"";if(this.checked){a(b.rows).each(function(e){if(e>0&&!a(this).hasClass("ui-subgrid")&&!a(this).hasClass("jqgroup")&&!a(this).hasClass("ui-disabled")){a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id))[b.p.useProp?
"prop":"attr"]("checked",true);a(this).addClass("ui-btn-active").attr("aria-selected","true");b.p.selarrrow.push(this.id);b.p.selrow=this.id;if(d){a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id),b.grid.fbDiv)[b.p.useProp?"prop":"attr"]("checked",true);a("#"+a.jgrid.jqID(this.id),b.grid.fbDiv).addClass("ui-btn-active")}}});T=true;Y=[]}else{a(b.rows).each(function(e){if(e>0&&!a(this).hasClass("ui-subgrid")&&!a(this).hasClass("ui-disabled")){a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id))[b.p.useProp?
"prop":"attr"]("checked",false);a(this).removeClass("ui-btn-active").attr("aria-selected","false");Y.push(this.id);if(d){a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id),b.grid.fbDiv)[b.p.useProp?"prop":"attr"]("checked",false);a("#"+a.jgrid.jqID(this.id),b.grid.fbDiv).removeClass("ui-btn-active")}}});b.p.selrow=null;T=false}a(b).triggerHandler("jqGridSelectAll",[T?b.p.selarrrow:Y,T]);a.isFunction(b.p.onSelectAll)&&b.p.onSelectAll.call(b,T?b.p.selarrrow:Y,T)})}!0===b.p.autowidth&&(s=a(l).parent().innerWidth()-
2,b.p.width=0<s?s:"nw");(function(){var d=0,e=a.jgrid.cellWidth()?0:o(b.p.cellLayout,0),c=0,f,h=o(b.p.scrollOffset,0),i,t=false,u,p=0,k=0,j;a.each(b.p.colModel,function(){if(typeof this.hidden==="undefined")this.hidden=false;this.widthOrg=i=o(this.width,0);if(this.hidden===false){d=d+(i+e);this.fixed?p=p+(i+e):c++;k++}});if(isNaN(b.p.width))b.p.width=d+(b.p.shrinkToFit===false&&!isNaN(b.p.height)?h:0);g.width=b.p.width;b.p.tblwidth=d;if(b.p.shrinkToFit===false&&b.p.forceFit===true)b.p.forceFit=false;
if(b.p.shrinkToFit===true&&c>0){u=g.width-e*c-p;if(!isNaN(b.p.height)){u=u-h;t=true}d=0;a.each(b.p.colModel,function(a){if(this.hidden===false&&!this.fixed){this.width=i=Math.round(u*this.width/(b.p.tblwidth-e*c-p));d=d+i;f=a}});j=0;t?g.width-p-(d+e*c)!==h&&(j=g.width-p-(d+e*c)-h):!t&&Math.abs(g.width-p-(d+e*c))!==1&&(j=g.width-p-(d+e*c));b.p.colModel[f].width=b.p.colModel[f].width+j;b.p.tblwidth=d+j+e*c+p;if(b.p.tblwidth>b.p.width){b.p.colModel[f].width=b.p.colModel[f].width-(b.p.tblwidth-parseInt(b.p.width,
10));b.p.tblwidth=b.p.width}}})();a(l).css("width",g.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+b.p.id+"'>&#160;</div>");a(j).css("width",g.width+"px");var s=a("thead:first",b).get(0),S="";b.p.footerrow&&(S+="<table role='grid' style='width:"+b.p.tblwidth+"px;' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+k+"'>");var j=a("tr:first",s),U="<tr class='jqgfirstrow' role='row' style='height:auto'>";
b.p.disableClick=!1;a("th",j).each(function(d){V=b.p.colModel[d].width;if(typeof b.p.colModel[d].resizable==="undefined")b.p.colModel[d].resizable=true;a(this).css("width",V+"px");var e="";if(b.p.colModel[d].hidden){a(this).css("display","none");e="display:none;"}U=U+("<td role='gridcell' style='height:0px;width:"+V+"px;"+e+"'></td>");g.headers[d]={width:V,el:this};X=b.p.colModel[d].sortable;if(typeof X!=="boolean")X=b.p.colModel[d].sortable=true;e=b.p.colModel[d].name;e=="cb"||e=="subgrid"||e=="rn"||
b.p.viewsortcols[2]&&a(">div",this).addClass("ui-jqgrid-sortable");if(X)if(b.p.viewsortcols[0]){a("div span.s-ico",this).show();d==b.p.lastsort&&a("div a.ui-icon-"+b.p.sortorder,this).show()}else if(d==b.p.lastsort){a("div span.s-ico",this).show();a("div a.ui-icon-"+b.p.sortorder,this).show()}b.p.footerrow&&(S=S+("<td role='gridcell' "+n(d,0,"",null,"",false)+">&#160;</td>"))}).click(function(d){if(b.p.disableClick)return b.p.disableClick=false;var e="th>div.ui-jqgrid-sortable",c,f;b.p.viewsortcols[2]||
(e="th>div>span>a.ui-grid-ico-sort");d=a(d.target).closest(e);if(d.length==1){for(var g=b.grid.headers,h=a.jgrid.getCellIndex(this),e=0;e<g.length;e++)if(this===g[e].el){h=e;break}e=h;if(!b.p.viewsortcols[2]){c=true;f=d.attr("sort")}y(a("div",this)[0].id,e,c,f);return false}});if(b.p.sortable&&a.fn.sortable)try{a(b).jqGrid("sortableColumns",j)}catch(ca){}b.p.footerrow&&(S+="</tr></tbody></table>");U+="</tr>";this.appendChild(document.createElement("tbody"));a(this).addClass("ui-jqgrid-btable").append(U);
var U=null,j=a("<table class='ui-jqgrid-htable' style='width:"+b.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(s),L=b.p.caption&&!0===b.p.hiddengrid?!0:!1;i=a("<div class='ui-jqgrid-hbox"+("rtl"==k?"-rtl":"")+"'></div>");s=null;g.hDiv=a('<div data-role="header" data-theme="'+b.p.dataTheme+'"></div>')[0];a(g.hDiv).css({width:g.width+"px"}).addClass("ui-jqgrid-hdiv").append(i);a(i).append(j);j=null;L&&a(g.hDiv).hide();b.p.pager&&
("string"==typeof b.p.pager?"#"!=b.p.pager.substr(0,1)&&(b.p.pager="#"+b.p.pager):b.p.pager="#"+a(b.p.pager).attr("id"),a(b.p.pager).css({width:g.width+"px"}).appendTo(l).addClass("ui-jqgrid-pager ui-corner-bottom"),L&&a(b.p.pager).hide(),p(b.p.pager,""));!1===b.p.cellEdit&&!0===b.p.hoverrows&&a(b).bind("vmouseover",function(b){w=a(b.target).closest("tr.jqgrow");a(w).attr("class")!=="ui-subgrid"&&a(w).addClass("ui-btn-hover-b")}).bind("vmouseout",function(b){w=a(b.target).closest("tr.jqgrow");a(w).removeClass("ui-btn-hover-b")});
var D,M,aa;a(b).before(g.hDiv).click(function(d){A=d.target;w=a(A,b.rows).closest("tr.jqgrow");if(a(w).length===0||w[0].className.indexOf("ui-disabled")>-1||(a(A,b).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==b.id)return this;var e=a(A).hasClass("cbox"),c=a(b).triggerHandler("jqGridBeforeSelectRow",[w[0].id,d]);(c=c===false||c==="stop"?false:true)&&a.isFunction(b.p.beforeSelectRow)&&(c=b.p.beforeSelectRow.call(b,w[0].id,d));if(!(A.tagName=="A"||(A.tagName=="INPUT"||A.tagName==
"TEXTAREA"||A.tagName=="OPTION"||A.tagName=="SELECT")&&!e)&&c===true){D=w[0].id;M=a.jgrid.getCellIndex(A);aa=a(A).closest("td,th").html();a(b).triggerHandler("jqGridCellSelect",[D,M,aa,d]);a.isFunction(b.p.onCellSelect)&&b.p.onCellSelect.call(b,D,M,aa,d);if(b.p.cellEdit===true)if(b.p.multiselect&&e)a(b).jqGrid("setSelection",D,true,d);else{D=w[0].rowIndex;try{a(b).jqGrid("editCell",D,M,true)}catch(f){}}else if(b.p.multikey)if(d[b.p.multikey])a(b).jqGrid("setSelection",D,true,d);else{if(b.p.multiselect&&
e){e=a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+D).is(":checked");a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+D)[b.p.useProp?"prop":"attr"]("checked",e)}}else{if(b.p.multiselect&&b.p.multiboxonly&&!e){var g=b.p.frozenColumns?b.p.id+"_frozen":"";a(b.p.selarrrow).each(function(d,e){var c=b.rows.namedItem(e);a(c).removeClass("ui-btn-active");a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(e))[b.p.useProp?"prop":"attr"]("checked",false);if(g){a("#"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(g)).removeClass("ui-btn-active");a("#jqg_"+
a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(g))[b.p.useProp?"prop":"attr"]("checked",false)}});b.p.selarrrow=[]}a(b).jqGrid("setSelection",D,true,d)}}}).bind("reloadGrid",function(d,e){if(b.p.treeGrid===true)b.p.datatype=b.p.treedatatype;e&&e.current&&b.grid.selectionPreserver(b);if(b.p.datatype=="local"){a(b).jqGrid("resetSelection");b.p.data.length&&B()}else if(!b.p.treeGrid){b.p.selrow=null;if(b.p.multiselect){b.p.selarrrow=[];t(false)}b.p.savedRow=[]}b.p.scroll&&J.call(b,true,false);
if(e&&e.page){var c=e.page;if(c>b.p.lastpage)c=b.p.lastpage;c<1&&(c=1);b.p.page=c}b.grid.populate();b.p._inlinenav===true&&a(b).jqGrid("showAddEditButtons");return false}).dblclick(function(d){A=d.target;w=a(A,b.rows).closest("tr.jqgrow");if(a(w).length!==0){D=w[0].rowIndex;M=a.jgrid.getCellIndex(A);a(b).triggerHandler("jqGridDblClickRow",[a(w).attr("id"),D,M,d]);a.isFunction(this.p.ondblClickRow)&&b.p.ondblClickRow.call(b,a(w).attr("id"),D,M,d)}}).bind("contextmenu",function(d){A=d.target;w=a(A,
b.rows).closest("tr.jqgrow");if(a(w).length!==0){b.p.multiselect||a(b).jqGrid("setSelection",w[0].id,true,d);D=w[0].rowIndex;M=a.jgrid.getCellIndex(A);a(b).triggerHandler("jqGridRightClickRow",[a(w).attr("id"),D,M,d]);a.isFunction(this.p.onRightClickRow)&&b.p.onRightClickRow.call(b,a(w).attr("id"),D,M,d)}});g.bDiv=a('<div data-role="content" data-theme="'+b.p.dataTheme+'" id="bdiv_'+b.p.id+'"></div')[0];a(g.bDiv).append(a('<div style="overflow:auto;display:table;"></div>').append(b.p.scrollPaging||
b.p.scroll?'<div id="pullDown_'+b.p.id+'" class="pullDown"><span class="pullDownIcon"></span><span class="pullDownLabel">Pull down to refresh...</span></div>':"").append(this).append(b.p.scrollPaging||b.p.scroll?'<div id="pullUp_'+b.p.id+'" class=pullUp"><span class="pullUpIcon"></span><span class="pullUpLabel">Pull up to refresh...</span></div>':"")).addClass("ui-jqgrid-bdiv").css({height:b.p.height+(isNaN(b.p.height)?"":"px"),width:g.width+"px"});a("table:first",g.bDiv).css({width:b.p.tblwidth+
"px"});m?(2==a("tbody",this).size()&&a("tbody:gt(0)",this).remove(),b.p.multikey&&a(g.bDiv).bind("selectstart",function(){return false})):b.p.multikey&&a(g.bDiv).bind("vmousedown",function(){return false});L&&a(g.bDiv).hide();g.cDiv=a("<div data-role='header' data-theme='"+b.p.dataTheme+"'></div>");m=!0===b.p.hidegrid?a("<a role='link' href='javascript:void(0)' data-iconpos='notext' data-icon='close' data-mini='true' data-role='button' data-inline='true' style='left:94%;'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").append("").css("rtl"==
k?"left":"right","0px"):"";a(g.cDiv).append(m).append("<span class='ui-jqgrid-title"+("rtl"==k?"-rtl":"")+"'>"+b.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-corner-top");a(g.cDiv).insertBefore(g.hDiv);b.p.toolbar[0]&&(g.uDiv=document.createElement("div"),"top"==b.p.toolbar[1]?a(g.uDiv).insertBefore(g.hDiv):"bottom"==b.p.toolbar[1]&&a(g.uDiv).insertAfter(g.hDiv),"both"==b.p.toolbar[1]?(g.ubDiv=document.createElement("div"),a(g.uDiv).insertBefore(g.hDiv).addClass("ui-userdata").attr("id","t_"+
this.id),a(g.ubDiv).insertAfter(g.hDiv).addClass("ui-userdata").attr("id","tb_"+this.id),L&&a(g.ubDiv).hide()):a(g.uDiv).width(g.width).addClass("ui-userdata").attr("id","t_"+this.id),L&&a(g.uDiv).hide());b.p.toppager&&(b.p.toppager=a.jgrid.jqID(b.p.id)+"_toppager",g.topDiv=a("<div class = 'ui-jqgrid-toppager' data-role='header' data-theme='"+b.p.dataTheme+"' id='"+b.p.toppager+"'></div>")[0],b.p.toppager="#"+b.p.toppager,a(g.topDiv).insertBefore(g.hDiv).width(g.width),p(b.p.toppager,"_t"));b.p.footerrow&&
(g.sDiv=a("<div class='ui-jqgrid-sdiv' data-role='content' data-theme='"+b.p.dataTheme+"'></div>")[0],i=a("<div class='ui-jqgrid-hbox"+("rtl"==k?"-rtl":"")+"'></div>"),a(g.sDiv).append(i).insertAfter(g.hDiv).width(g.width),a(i).append(S),g.footers=a(".ui-jqgrid-ftable",g.sDiv)[0].rows[0].cells,b.p.rownumbers&&(g.footers[0].className="jqgrid-rownum"),L&&a(g.sDiv).hide());i=null;if(b.p.caption){var ba=b.p.datatype;!0===b.p.hidegrid&&(a(".ui-jqgrid-titlebar-close",g.cDiv).click(function(d){var e=a.isFunction(b.p.onHeaderClick),
c=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f;if(b.p.toolbar[0]===true){b.p.toolbar[1]=="both"&&(c=c+(", #"+a(g.ubDiv).attr("id")));c=c+(", #"+a(g.uDiv).attr("id"))}f=a(c,"#gview_"+a.jgrid.jqID(b.p.id)).length;b.p.gridstate=="visible"?a(c,"#gbox_"+a.jgrid.jqID(b.p.id)).slideUp("fast",function(){f--;if(f===0){b.p.gridstate="hidden";a(b).triggerHandler("jqGridHeaderClick",[b.p.gridstate,d]);e&&(L||b.p.onHeaderClick.call(b,b.p.gridstate,d))}}):b.p.gridstate=="hidden"&&a(c,
"#gbox_"+a.jgrid.jqID(b.p.id)).slideDown("fast",function(){f--;if(f===0){if(L){b.p.datatype=ba;u();L=false}b.p.gridstate="visible";a(b).triggerHandler("jqGridHeaderClick",[b.p.gridstate,d]);e&&(L||b.p.onHeaderClick.call(b,b.p.gridstate,d))}});return false}),L&&(b.p.datatype="local",a(".ui-jqgrid-titlebar-close",g.cDiv).trigger("click")))}else a(g.cDiv).hide();a(g.hDiv).after(g.bDiv);a(".ui-jqgrid-labels",g.hDiv).bind("selectstart",function(){return false});b.formatCol=n;b.sortData=y;b.updatepager=
function(d,e){var c,f,g,h,i,t,u,p="",k=b.p.pager?"_"+a.jgrid.jqID(b.p.pager.substr(1)):"",j=b.p.toppager?"_"+b.p.toppager.substr(1):"";g=parseInt(b.p.page,10)-1;g<0&&(g=0);g=g*parseInt(b.p.rowNum,10);i=g+b.p.reccount;p=b.p.pager?b.p.pager:"";if(p=p+(b.p.toppager?p?","+b.p.toppager:b.p.toppager:"")){u=a.jgrid.formatter.integer||{};c=o(b.p.page);f=o(b.p.lastpage);a(".selbox",p)[this.p.useProp?"prop":"attr"]("disabled",false);if(b.p.viewrecords)if(b.p.reccount===0)a(".ui-paging-info",p).html(b.p.emptyrecords);
else{h=g+1;t=b.p.records;if(a.fmatter){h=a.fmatter.util.NumberFormat(h,u);i=a.fmatter.util.NumberFormat(i,u);t=a.fmatter.util.NumberFormat(t,u)}a(".ui-paging-info",p).html(a.jgrid.format(b.p.recordtext,h,i,t))}if(b.p.pgbuttons===true){c<=0&&(c=f=0);if(c==1||c===0){a("#first"+k+", #prev"+k).addClass("ui-disabled").removeClass("ui-btn-hover-b");b.p.toppager&&a("#first_t"+j+", #prev_t"+j).addClass("ui-disabled").removeClass("ui-btn-hover-b")}else{a("#first"+k+", #prev"+k).removeClass("ui-disabled");
b.p.toppager&&a("#first_t"+j+", #prev_t"+j).removeClass("ui-disabled")}if(c==f||c===0){a("#next"+k+", #last"+k).addClass("ui-disabled").removeClass("ui-btn-hover-b");b.p.toppager&&a("#next_t"+j+", #last_t"+j).addClass("ui-disabled").removeClass("ui-btn-hover-b")}else{a("#next"+k+", #last"+k).removeClass("ui-disabled");b.p.toppager&&a("#next_t"+j+", #last_t"+j).removeClass("ui-disabled")}}}d===true&&b.p.rownumbers===true&&a("td.jqgrid-rownum",b.rows).each(function(b){a(this).html(g+1+b)});e&&b.p.jqgdnd&&
a(b).jqGrid("gridDnD","updateDnD");a(b).triggerHandler("jqGridGridComplete");a.isFunction(b.p.gridComplete)&&b.p.gridComplete.call(b);a(b).triggerHandler("jqGridAfterGridComplete")};b.refreshIndex=B;b.setHeadCheckBox=t;b.constructTr=H;b.formatter=function(a,b,d,e,c){return r(a,b,d,e,c)};a.extend(g,{populate:u,emptyRows:J});this.grid=g;b.addXmlData=function(a){I(a,b.grid.bDiv)};b.addJSONData=function(a){E(a,b.grid.bDiv)};b.endReq=function(){F()};this.grid.cols=this.rows[0].cells;u();b.p.hiddengrid=
!1;d.bind("pageshow",function(){var d={onScrollMove:function(){if(this.x<=0){g.hDiv.scrollLeft=-this.x;if(b.p.footerrow)g.sDiv.scrollLeft=-this.x}}};if(b.p.scrollPaging||b.p.scroll){b.p.iScroll.bounce=true;var e=a("#pullUp_"+a.jgrid.jqID(b.p.id))[0],f=a("#pullDown_"+a.jgrid.jqID(b.p.id))[0],i=e.offsetHeight,t=f.offsetHeight;d.onRefresh=function(){if(f.className.match("loading1")){f.className="";f.querySelector(".pullDownLabel").innerHTML="Pull down to refresh..."}else if(e.className.match("loading1")){e.className=
"";e.querySelector(".pullUpLabel").innerHTML="Pull up to load more..."}};d.onScrollMove=function(){if(this.x<=0){g.hDiv.scrollLeft=-this.x;if(b.p.footerrow)g.sDiv.scrollLeft=-this.x}if(this.y>5&&!f.className.match("gridflip")){f.className="gridflip";f.querySelector(".pullDownLabel").innerHTML="Release to refresh...";this.minScrollY=0}else if(this.y<5&&f.className.match("gridflip")){f.className="";f.querySelector(".pullDownLabel").innerHTML="Pull down to refresh...";this.minScrollY=-t}else if(this.y<
this.maxScrollY-5&&!e.className.match("gridflip")){e.className="gridflip";e.querySelector(".pullUpLabel").innerHTML="Release to refresh...";this.maxScrollY=this.maxScrollY}else if(this.y>this.maxScrollY+5&&e.className.match("gridflip")){e.className="";e.querySelector(".pullUpLabel").innerHTML="Pull up to load more...";this.maxScrollY=i}};d.onScrollEnd=function(){if(f.className.match("gridflip")){f.className="loading1";f.querySelector(".pullDownLabel").innerHTML="Loading...";if(b.p.page>1){b.p.page--;
u()}else{f.className="";f.querySelector(".pullDownLabel").innerHTML="No more rows ..."}}else if(e.className.match("gridflip")){e.className="loading1";e.querySelector(".pullUpLabel").innerHTML="Loading...";if(b.p.lastpage>=b.p.page+1){b.p.page++;u()}else{e.className="";e.querySelector(".pullUpLabel").innerHTML="No more rows ..."}}}}d=a.extend(true,d,b.p.iScroll||{});setTimeout(function(){b.p.prmNames.npage=1;c=new iScroll("bdiv_"+b.p.id,d);(b.p.scrollPaging||b.p.scroll)&&c.scrollTo(0,-45,100)},0)});
b.p.refreshContent&&a("#"+a.jgrid.jqID(b.p.id)).bind("jqGridAfterGridComplete.Mobile",function(){a(this).trigger("create")});a(window).unload(function(){b=null}).bind("orientationchange",function(){setTimeout(function(){var d=a(window).width(),e=a("#gbox_"+a.jgrid.jqID(b.p.id)).parent().width();a("#"+a.jgrid.jqID(b.p.id)).jqGrid("setGridWidth",d-e>3?e:d);c.refresh()},600)})}}}})};a.jgrid.extend({getGridParam:function(a){var c=this[0];return!c||!c.grid?void 0:a?"undefined"!=typeof c.p[a]?c.p[a]:null:
c.p},setGridParam:function(e){return this.each(function(){this.grid&&"object"===typeof e&&a.extend(!0,this.p,e)})},getDataIDs:function(){var e=[],c=0,d,f=0;this.each(function(){if((d=this.rows.length)&&0<d)for(;c<d;)a(this.rows[c]).hasClass("jqgrow")&&(e[f]=this.rows[c].id,f++),c++});return e},setSelection:function(e,c,d){return this.each(function(){var f,b,h,g,i,k;if(void 0!==e&&(c=!1===c?!1:!0,(b=this.rows.namedItem(e+""))&&b.className&&!(-1<b.className.indexOf("ui-disabled"))))(!0===this.p.scrollrows&&
(h=this.rows.namedItem(e).rowIndex,0<=h&&(f=a(this.grid.bDiv)[0].clientHeight,g=a(this.grid.bDiv)[0].scrollTop,i=a(this.rows[h]).position().top,h=this.rows[h].clientHeight,i+h>=f+g?a(this.grid.bDiv)[0].scrollTop=i-(f+g)+h+g:i<f+g&&i<g&&(a(this.grid.bDiv)[0].scrollTop=i))),!0===this.p.frozenColumns&&(k=this.p.id+"_frozen"),this.p.multiselect)?(this.setHeadCheckBox(!1),this.p.selrow=b.id,g=a.inArray(this.p.selrow,this.p.selarrrow),-1===g?("ui-subgrid"!==b.className&&a(b).addClass("ui-btn-active").attr("aria-selected",
"true"),f=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==b.className&&a(b).removeClass("ui-btn-active").attr("aria-selected","false"),f=!1,this.p.selarrrow.splice(g,1),i=this.p.selarrrow[0],this.p.selrow=void 0===i?null:i),a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(b.id))[this.p.useProp?"prop":"attr"]("checked",f),k&&(-1===g?a("#"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(k)).addClass("ui-btn-active"):a("#"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(k)).removeClass("ui-btn-active"),a("#jqg_"+a.jgrid.jqID(this.p.id)+
"_"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(k))[this.p.useProp?"prop":"attr"]("checked",f)),a(this).triggerHandler("jqGridSelectRow",[b.id,f,d]),this.p.onSelectRow&&c&&this.p.onSelectRow.call(this,b.id,f,d)):"ui-subgrid"!==b.className&&(this.p.selrow!=b.id?(a(this.rows.namedItem(this.p.selrow)).removeClass("ui-btn-active").attr({"aria-selected":"false",tabindex:"-1"}),a(b).addClass("ui-btn-active").attr({"aria-selected":"true",tabindex:"0"}),k&&(a("#"+a.jgrid.jqID(this.p.selrow),"#"+a.jgrid.jqID(k)).removeClass("ui-btn-active"),
a("#"+a.jgrid.jqID(e),"#"+a.jgrid.jqID(k)).addClass("ui-btn-active")),f=!0):f=!1,this.p.selrow=b.id,a(this).triggerHandler("jqGridSelectRow",[b.id,f,d]),this.p.onSelectRow&&c&&this.p.onSelectRow.call(this,b.id,f,d))})},resetSelection:function(e){return this.each(function(){var c=this,d,f,b;!0===c.p.frozenColumns&&(b=c.p.id+"_frozen");if("undefined"!==typeof e){f=e===c.p.selrow?c.p.selrow:e;a("#"+a.jgrid.jqID(c.p.id)+" tbody:first tr#"+a.jgrid.jqID(f)).removeClass("ui-btn-active").attr("aria-selected",
"false");b&&a("#"+a.jgrid.jqID(f),"#"+a.jgrid.jqID(b)).removeClass("ui-btn-active");if(c.p.multiselect){a("#jqg_"+a.jgrid.jqID(c.p.id)+"_"+a.jgrid.jqID(f),"#"+a.jgrid.jqID(c.p.id))[c.p.useProp?"prop":"attr"]("checked",!1);if(b)a("#jqg_"+a.jgrid.jqID(c.p.id)+"_"+a.jgrid.jqID(f),"#"+a.jgrid.jqID(b))[c.p.useProp?"prop":"attr"]("checked",!1);c.setHeadCheckBox(!1)}f=null}else c.p.multiselect?(a(c.p.selarrrow).each(function(e,f){d=c.rows.namedItem(f);a(d).removeClass("ui-btn-active").attr("aria-selected",
"false");a("#jqg_"+a.jgrid.jqID(c.p.id)+"_"+a.jgrid.jqID(f))[c.p.useProp?"prop":"attr"]("checked",!1);b&&(a("#"+a.jgrid.jqID(f),"#"+a.jgrid.jqID(b)).removeClass("ui-btn-active"),a("#jqg_"+a.jgrid.jqID(c.p.id)+"_"+a.jgrid.jqID(f),"#"+a.jgrid.jqID(b))[c.p.useProp?"prop":"attr"]("checked",!1))}),c.setHeadCheckBox(!1),c.p.selarrrow=[]):c.p.selrow&&(a("#"+a.jgrid.jqID(c.p.id)+" tbody:first tr#"+a.jgrid.jqID(c.p.selrow)).removeClass("ui-btn-active").attr("aria-selected","false"),b&&a("#"+a.jgrid.jqID(c.p.selrow),
"#"+a.jgrid.jqID(b)).removeClass("ui-btn-active"),c.p.selrow=null);!0===c.p.cellEdit&&0<=parseInt(c.p.iCol,10)&&0<=parseInt(c.p.iRow,10)&&(a("td:eq("+c.p.iCol+")",c.rows[c.p.iRow]).removeClass("edit-cell ui-btn-active"),a(c.rows[c.p.iRow]).removeClass("selected-row ui-btn-hover-b"));c.p.savedRow=[]})},getRowData:function(e){var c={},d,f=!1,b,h=0;this.each(function(){var g=this,i,k;if("undefined"==typeof e)f=!0,d=[],b=g.rows.length;else{k=g.rows.namedItem(e);if(!k)return c;b=2}for(;h<b;)f&&(k=g.rows[h]),
a(k).hasClass("jqgrow")&&(a('td[role="gridcell"]',k).each(function(b){i=g.p.colModel[b].name;if("cb"!==i&&"subgrid"!==i&&"rn"!==i)if(!0===g.p.treeGrid&&i==g.p.ExpandColumn)c[i]=a.jgrid.htmlDecode(a("span:first",this).html());else try{c[i]=a.unformat.call(g,this,{rowId:k.id,colModel:g.p.colModel[b]},b)}catch(d){c[i]=a.jgrid.htmlDecode(a(this).html())}}),f&&(d.push(c),c={})),h++});return d?d:c},delRowData:function(e){var c=!1,d,f;this.each(function(){if(d=this.rows.namedItem(e)){if(a(d).remove(),this.p.records--,
this.p.reccount--,this.updatepager(!0,!1),c=!0,this.p.multiselect&&(f=a.inArray(e,this.p.selarrrow),-1!=f&&this.p.selarrrow.splice(f,1)),e==this.p.selrow)this.p.selrow=null}else return!1;if("local"==this.p.datatype){var b=this.p._index[a.jgrid.stripPref(this.p.idPrefix,e)];"undefined"!=typeof b&&(this.p.data.splice(b,1),this.refreshIndex())}if(!0===this.p.altRows&&c){var h=this.p.altclass;a(this.rows).each(function(b){1==b%2?a(this).addClass(h):a(this).removeClass(h)})}});return c},setRowData:function(e,
c,d){var f,b=!0,h;this.each(function(){if(!this.grid)return!1;var g=this,i,k,j=typeof d,m={};k=g.rows.namedItem(e);if(!k)return!1;if(c)try{if(a(this.p.colModel).each(function(b){f=this.name;void 0!==c[f]&&(m[f]=this.formatter&&"string"===typeof this.formatter&&"date"==this.formatter?a.unformat.date.call(g,c[f],this):c[f],i=g.formatter(e,c[f],b,c,"edit"),h=this.title?{title:a.jgrid.stripHtml(i)}:{},!0===g.p.treeGrid&&f==g.p.ExpandColumn?a("td:eq("+b+") > span:first",k).html(i).attr(h):a("td:eq("+b+
")",k).html(i).attr(h))}),"local"==g.p.datatype){var l=a.jgrid.stripPref(g.p.idPrefix,e),o=g.p._index[l];if(g.p.treeGrid)for(var n in g.p.treeReader)m.hasOwnProperty(g.p.treeReader[n])&&delete m[g.p.treeReader[n]];"undefined"!=typeof o&&(g.p.data[o]=a.extend(!0,g.p.data[o],m));m=null}}catch(q){b=!1}b&&("string"===j?a(k).addClass(d):"object"===j&&a(k).css(d),a(g).triggerHandler("jqGridAfterGridComplete"))});return b},addRowData:function(e,c,d,f){d||(d="last");var b=!1,h,g,i,k,j,m,l,o,n="",q,r,v,G,
Q,O;c&&(a.isArray(c)?(q=!0,d="last",r=e):(c=[c],q=!1),this.each(function(){var P=c.length;j=this.p.rownumbers===true?1:0;i=this.p.multiselect===true?1:0;k=this.p.subGrid===true?1:0;if(!q)if(typeof e!="undefined")e=e+"";else{e=a.jgrid.randId();if(this.p.keyIndex!==false){r=this.p.colModel[this.p.keyIndex+i+k+j].name;typeof c[0][r]!="undefined"&&(e=c[0][r])}}v=this.p.altclass;for(var J=0,B="",H={},I=a.isFunction(this.p.afterInsertRow)?true:false;J<P;){G=c[J];g=[];if(q){try{e=G[r]}catch(E){e=a.jgrid.randId()}B=
this.p.altRows===true?(this.rows.length-1)%2===0?v:"":""}O=e;e=this.p.idPrefix+e;if(j){n=this.formatCol(0,1,"",null,e,true);g[g.length]='<td role="gridcell" class="jqgrid-rownum" '+n+">0</td>"}if(i){o='<input data-role="none" role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+e+'" class="cbox"/>';n=this.formatCol(j,1,"",null,e,true);g[g.length]='<td role="gridcell" '+n+">"+o+"</td>"}k&&(g[g.length]=a(this).jqGrid("addSubGridCell",i+j,1));for(l=i+k+j;l<this.p.colModel.length;l++){Q=this.p.colModel[l];
h=Q.name;H[h]=G[h];o=this.formatter(e,a.jgrid.getAccessor(G,h),l,G);n=this.formatCol(l,1,o,G,e,H);g[g.length]='<td role="gridcell" '+n+">"+o+"</td>"}g.unshift(this.constructTr(e,false,B,H,G));g[g.length]="</tr>";if(this.rows.length===0)a("table:first",this.grid.bDiv).append(g.join(""));else switch(d){case "last":a(this.rows[this.rows.length-1]).after(g.join(""));m=this.rows.length-1;break;case "first":a(this.rows[0]).after(g.join(""));m=1;break;case "after":(m=this.rows.namedItem(f))&&(a(this.rows[m.rowIndex+
1]).hasClass("ui-subgrid")?a(this.rows[m.rowIndex+1]).after(g):a(m).after(g.join("")));m++;break;case "before":if(m=this.rows.namedItem(f)){a(m).before(g.join(""));m=m.rowIndex}m--}this.p.subGrid===true&&a(this).jqGrid("addSubGrid",i+j,m);this.p.records++;this.p.reccount++;a(this).triggerHandler("jqGridAfterInsertRow",[e,G,G]);I&&this.p.afterInsertRow.call(this,e,G,G);J++;if(this.p.datatype=="local"){H[this.p.localReader.id]=O;this.p._index[O]=this.p.data.length;this.p.data.push(H);H={}}}this.p.altRows===
true&&!q&&(d=="last"?(this.rows.length-1)%2==1&&a(this.rows[this.rows.length-1]).addClass(v):a(this.rows).each(function(b){b%2==1?a(this).addClass(v):a(this).removeClass(v)}));this.updatepager(true,true);b=true}));return b},footerData:function(e,c,d){function f(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var b,h=!1,g={},i;"undefined"==typeof e&&(e="get");"boolean"!=typeof d&&(d=!0);e=e.toLowerCase();this.each(function(){var k=this,j;if(!k.grid||!k.p.footerrow||"set"==e&&f(c))return!1;
h=!0;a(this.p.colModel).each(function(f){b=this.name;"set"==e?void 0!==c[b]&&(j=d?k.formatter("",c[b],f,c,"edit"):c[b],i=this.title?{title:a.jgrid.stripHtml(j)}:{},a("tr.footrow td:eq("+f+")",k.grid.sDiv).html(j).attr(i),h=!0):"get"==e&&(g[b]=a("tr.footrow td:eq("+f+")",k.grid.sDiv).html())})});return"get"==e?g:h},showHideCol:function(e,c){return this.each(function(){var d=this,f=!1,b=a.jgrid.cellWidth()?0:d.p.cellLayout,h;if(d.grid){"string"===typeof e&&(e=[e]);c="none"!=c?"":"none";var g=""===c?
!0:!1,i=d.p.groupHeader&&("object"===typeof d.p.groupHeader||a.isFunction(d.p.groupHeader));i&&a(d).jqGrid("destroyGroupHeader",!1);a(this.p.colModel).each(function(i){if(-1!==a.inArray(this.name,e)&&this.hidden===g){if(!0===d.p.frozenColumns&&!0===this.frozen)return!0;a("tr",d.grid.hDiv).each(function(){a(this.cells[i]).css("display",c)});a(d.rows).each(function(){a(this).hasClass("jqgroup")||a(this.cells[i]).css("display",c)});d.p.footerrow&&a("tr.footrow td:eq("+i+")",d.grid.sDiv).css("display",
c);h=parseInt(this.width,10);d.p.tblwidth="none"===c?d.p.tblwidth-(h+b):d.p.tblwidth+(h+b);this.hidden=!g;f=!0;a(d).triggerHandler("jqGridShowHideCol",[g,this.name,i])}});!0===f&&(!0===d.p.shrinkToFit&&!isNaN(d.p.height)&&(d.p.tblwidth+=parseInt(d.p.scrollOffset,10)),a(d).jqGrid("setGridWidth",!0===d.p.shrinkToFit?d.p.tblwidth:d.p.width));i&&a(d).jqGrid("setGroupHeaders",d.p.groupHeader)}})},hideCol:function(e){return this.each(function(){a(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){a(this).jqGrid("showHideCol",
e,"")})},remapColumns:function(e,c,d){function f(b){var d;d=b.length?a.makeArray(b):a.extend({},b);a.each(e,function(a){b[a]=d[this]})}function b(b,d){a(">tr"+(d||""),b).each(function(){var b=this,d=a.makeArray(b.cells);a.each(e,function(){var a=d[this];a&&b.appendChild(a)})})}var h=this.get(0);f(h.p.colModel);f(h.p.colNames);f(h.grid.headers);b(a("thead:first",h.grid.hDiv),d&&":not(.ui-jqgrid-labels)");c&&b(a("#"+a.jgrid.jqID(h.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");h.p.footerrow&&
b(a("tbody:first",h.grid.sDiv));h.p.remapColumns&&(h.p.remapColumns.length?f(h.p.remapColumns):h.p.remapColumns=a.makeArray(e));h.p.lastsort=a.inArray(h.p.lastsort,e);h.p.treeGrid&&(h.p.expColInd=a.inArray(h.p.expColInd,e));a(h).triggerHandler("jqGridRemapColumns",[e,c,d])},setGridWidth:function(e,c){return this.each(function(){if(this.grid){var d=this,f,b=0,h=a.jgrid.cellWidth()?0:d.p.cellLayout,g,i=0,k=!1,j=d.p.scrollOffset,m,l=0,o=0,n;"boolean"!=typeof c&&(c=d.p.shrinkToFit);if(!isNaN(e)){e=parseInt(e,
10);d.grid.width=d.p.width=e;a("#gbox_"+a.jgrid.jqID(d.p.id)).css("width",e+"px");a("#gview_"+a.jgrid.jqID(d.p.id)).css("width",e+"px");a(d.grid.bDiv).css("width",e+"px");a(d.grid.hDiv).css("width",e+"px");d.p.pager&&a(d.p.pager).css("width",e+"px");d.p.toppager&&a(d.p.toppager).css("width",e+"px");!0===d.p.toolbar[0]&&(a(d.grid.uDiv).css("width",e+"px"),"both"==d.p.toolbar[1]&&a(d.grid.ubDiv).css("width",e+"px"));d.p.footerrow&&a(d.grid.sDiv).css("width",e+"px");!1===c&&!0===d.p.forceFit&&(d.p.forceFit=
!1);if(!0===c){a.each(d.p.colModel,function(){if(this.hidden===false){f=this.widthOrg;b=b+(f+h);this.fixed?l=l+(f+h):i++;o++}});if(0===i)return;d.p.tblwidth=b;m=e-h*i-l;if(!isNaN(d.p.height)&&(a(d.grid.bDiv)[0].clientHeight<a(d.grid.bDiv)[0].scrollHeight||1===d.rows.length))k=!0,m-=j;var b=0,q=0<d.grid.cols.length;a.each(d.p.colModel,function(a){if(this.hidden===false&&!this.fixed){f=this.widthOrg;f=Math.round(m*f/(d.p.tblwidth-h*i-l));if(!(f<0)){this.width=f;b=b+f;d.grid.headers[a].width=f;d.grid.headers[a].el.style.width=
f+"px";if(d.p.footerrow)d.grid.footers[a].style.width=f+"px";if(q)d.grid.cols[a].style.width=f+"px";g=a}}});if(!g)return;n=0;k?e-l-(b+h*i)!==j&&(n=e-l-(b+h*i)-j):1!==Math.abs(e-l-(b+h*i))&&(n=e-l-(b+h*i));d.p.colModel[g].width+=n;d.p.tblwidth=b+n+h*i+l;d.p.tblwidth>e?(k=d.p.tblwidth-parseInt(e,10),d.p.tblwidth=e,f=d.p.colModel[g].width-=k):f=d.p.colModel[g].width;d.grid.headers[g].width=f;d.grid.headers[g].el.style.width=f+"px";q&&(d.grid.cols[g].style.width=f+"px");d.p.footerrow&&(d.grid.footers[g].style.width=
f+"px")}d.p.tblwidth&&(a("table:first",d.grid.bDiv).css("width",d.p.tblwidth+"px"),a("table:first",d.grid.hDiv).css("width",d.p.tblwidth+"px"),d.grid.hDiv.scrollLeft=d.grid.bDiv.scrollLeft,d.p.footerrow&&a("table:first",d.grid.sDiv).css("width",d.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){if(this.grid){var c=a(this.grid.bDiv);c.css({height:e+(isNaN(e)?"":"px")});!0===this.p.frozenColumns&&a("#"+a.jgrid.jqID(this.p.id)+"_frozen").parent().height(c.height()-16);this.p.height=
e;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e;a("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e);a(this.grid.cDiv).show()})},setLabel:function(e,c,d,f){return this.each(function(){var b=-1;if(this.grid&&"undefined"!=typeof e&&(a(this.p.colModel).each(function(a){if(this.name==e)return b=a,!1}),0<=b)){var h=a("tr.ui-jqgrid-labels th:eq("+b+")",this.grid.hDiv);if(c){var g=a(".s-ico",h);a("[id^=jqgh_]",h).empty().html(c).append(g);
this.p.colNames[b]=c}d&&("string"===typeof d?a(h).addClass(d):a(h).css(d));"object"===typeof f&&a(h).attr(f)}})},setCell:function(e,c,d,f,b,h){return this.each(function(){var g=-1,i,k;if(this.grid&&(isNaN(c)?a(this.p.colModel).each(function(a){if(this.name==c)return g=a,!1}):g=parseInt(c,10),0<=g&&(i=this.rows.namedItem(e)))){var j=a("td:eq("+g+")",i);if(""!==d||!0===h)i=this.formatter(e,d,g,i,"edit"),k=this.p.colModel[g].title?{title:a.jgrid.stripHtml(i)}:{},this.p.treeGrid&&0<a(".tree-wrap",a(j)).length?
a("span",a(j)).html(i).attr(k):a(j).html(i).attr(k),"local"==this.p.datatype&&(i=this.p.colModel[g],d=i.formatter&&"string"===typeof i.formatter&&"date"==i.formatter?a.unformat.date.call(this,d,i):d,k=this.p._index[e],"undefined"!=typeof k&&(this.p.data[k][i.name]=d));"string"===typeof f?a(j).addClass(f):f&&a(j).css(f);"object"===typeof b&&a(j).attr(b)}})},getCell:function(e,c){var d=!1;this.each(function(){var f=-1;if(this.grid&&(isNaN(c)?a(this.p.colModel).each(function(a){if(this.name===c)return f=
a,!1}):f=parseInt(c,10),0<=f)){var b=this.rows.namedItem(e);if(b)try{d=a.unformat.call(this,a("td:eq("+f+")",b),{rowId:b.id,colModel:this.p.colModel[f]},f)}catch(h){d=a.jgrid.htmlDecode(a("td:eq("+f+")",b).html())}}});return d},getCol:function(e,c,d){var f=[],b,h=0,g,i,k,c="boolean"!=typeof c?!1:c;"undefined"==typeof d&&(d=!1);this.each(function(){var j=-1;if(this.grid&&(isNaN(e)?a(this.p.colModel).each(function(a){if(this.name===e)return j=a,!1}):j=parseInt(e,10),0<=j)){var m=this.rows.length,l=
0;if(m&&0<m){for(;l<m;){if(a(this.rows[l]).hasClass("jqgrow")){try{b=a.unformat.call(this,a(this.rows[l].cells[j]),{rowId:this.rows[l].id,colModel:this.p.colModel[j]},j)}catch(o){b=a.jgrid.htmlDecode(this.rows[l].cells[j].innerHTML)}d?(k=parseFloat(b),h+=k,void 0===i&&(i=g=k),g=Math.min(g,k),i=Math.max(i,k)):c?f.push({id:this.rows[l].id,value:b}):f.push(b)}l++}if(d)switch(d.toLowerCase()){case "sum":f=h;break;case "avg":f=h/m;break;case "count":f=m;break;case "min":f=g;break;case "max":f=i}}}});return f},
clearGridData:function(e){return this.each(function(){if(this.grid){"boolean"!=typeof e&&(e=!1);if(this.p.deepempty)a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var c=a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];a("#"+a.jgrid.jqID(this.p.id)+" tbody:first").empty().append(c)}this.p.footerrow&&e&&a(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=
0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(a,c){var d=!1,f;this.each(function(){(f=this.rows.namedItem(a))&&(d=!0===c?f:f.rowIndex)});return d},bindKeys:function(e){var c=a.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var d=this;a("body").is("[role]")||a("body").attr("role","application");d.p.scrollrows=c.scrollingRows;a(d).keydown(function(e){var b=a(d).find("tr[tabindex=0]")[0],h,g,i,k=d.p.treeReader.expanded_field;
if(b)if(i=d.p._index[b.id],37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){if(38===e.keyCode){g=b.previousSibling;h="";if(g)if(a(g).is(":hidden"))for(;g;){if(g=g.previousSibling,!a(g).is(":hidden")&&a(g).hasClass("jqgrow")){h=g.id;break}}else h=g.id;a(d).jqGrid("setSelection",h,!0,e);e.preventDefault()}if(40===e.keyCode){g=b.nextSibling;h="";if(g)if(a(g).is(":hidden"))for(;g;){if(g=g.nextSibling,!a(g).is(":hidden")&&a(g).hasClass("jqgrow")){h=g.id;break}}else h=g.id;a(d).jqGrid("setSelection",
h,!0,e);e.preventDefault()}37===e.keyCode&&(d.p.treeGrid&&d.p.data[i][k]&&a(b).find("div.treeclick").trigger("click"),a(d).triggerHandler("jqGridKeyLeft",[d.p.selrow]),a.isFunction(c.onLeftKey)&&c.onLeftKey.call(d,d.p.selrow));39===e.keyCode&&(d.p.treeGrid&&!d.p.data[i][k]&&a(b).find("div.treeclick").trigger("click"),a(d).triggerHandler("jqGridKeyRight",[d.p.selrow]),a.isFunction(c.onRightKey)&&c.onRightKey.call(d,d.p.selrow))}else 13===e.keyCode?(a(d).triggerHandler("jqGridKeyEnter",[d.p.selrow]),
a.isFunction(c.onEnter)&&c.onEnter.call(d,d.p.selrow)):32===e.keyCode&&(a(d).triggerHandler("jqGridKeySpace",[d.p.selrow]),a.isFunction(c.onSpace)&&c.onSpace.call(d,d.p.selrow))})})},unbindKeys:function(){return this.each(function(){a(this).unbind("keydown")})},getLocalRow:function(a){var c=!1,d;this.each(function(){"undefined"!==typeof a&&(d=this.p._index[a],0<=d&&(c=this.p.data[d]))});return c}})})(jQuery);
(function(a){a.jgrid.extend({getColProp:function(a){var c={},d=this[0];if(!d.grid)return!1;for(var d=d.p.colModel,f=0;f<d.length;f++)if(d[f].name==a){c=d[f];break}return c},setColProp:function(e,c){return this.each(function(){if(this.grid&&c)for(var d=this.p.colModel,f=0;f<d.length;f++)if(d[f].name==e){a.extend(this.p.colModel[f],c);break}})},sortGrid:function(a,c,d){return this.each(function(){var f=-1;if(this.grid){a||(a=this.p.sortname);for(var b=0;b<this.p.colModel.length;b++)if(this.p.colModel[b].index==
a||this.p.colModel[b].name==a){f=b;break}-1!=f&&(b=this.p.colModel[f].sortable,"boolean"!==typeof b&&(b=!0),"boolean"!==typeof c&&(c=!1),b&&this.sortData("jqgh_"+this.p.id+"_"+a,f,c,d))}})},clearBeforeUnload:function(){return this.each(function(){var e=this.grid;e.emptyRows.call(this,!0,!0);a(e.hDiv).unbind("mousemove");a(this).unbind();e.dragEnd=null;e.dragMove=null;e.dragStart=null;e.emptyRows=null;e.populate=null;e.populateVisible=null;e.scrollGrid=null;e.selectionPreserver=null;e.bDiv=null;e.cDiv=
null;e.hDiv=null;e.cols=null;var c,d=e.headers.length;for(c=0;c<d;c++)e.headers[c].el=null;this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();try{a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+a.jgrid.jqID(this.id)).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var e=
a(this).attr("id"),c=a(this).attr("class");this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var d=document.createElement("table");a(d).attr({id:e});d.className=c;e=a.jgrid.jqID(this.id);a(d).removeClass("ui-jqgrid-btable");1===a(this.p.pager).parents("#gbox_"+e).length?(a(d).insertBefore("#gbox_"+e).show(),a(this.p.pager).insertBefore("#gbox_"+e)):a(d).insertBefore("#gbox_"+e).show();a(this).jqGrid("clearBeforeUnload");a("#gbox_"+e).remove()}})},
setGridState:function(e){return this.each(function(){this.grid&&("hidden"==e?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",
this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"==e&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+
a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(e){e=a.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},e||{});return this.each(function(){function c(b,d){var e=a(b);e[0]&&jQuery.each(d,function(){void 0!==
this.data?e.bind(this.type,this.data,this.fn):e.bind(this.type,this.fn)})}var d=this;if(!this.ftoolbar){var f=function(){var b={},c=0,f,h,m={},l;a.each(d.p.colModel,function(){h=this.index||this.name;l=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":e.defaultSearch;if(f=a("#gs_"+a.jgrid.jqID(this.name),!0===this.frozen&&!0===d.p.frozenColumns?d.grid.fhDiv:d.grid.hDiv).val())b[h]=f,m[h]=l,c++;else try{delete d.p.postData[h]}catch(n){}});var o=0<c?!0:
!1;if(!0===e.stringResult||"local"==d.p.datatype){var n='{"groupOp":"'+e.groupOp+'","rules":[',q=0;a.each(b,function(a,b){0<q&&(n+=",");n+='{"field":"'+a+'",';n+='"op":"'+m[a]+'",';n+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';q++});n+="]}";a.extend(d.p.postData,{filters:n});a.each(["searchField","searchString","searchOper"],function(a,b){d.p.postData.hasOwnProperty(b)&&delete d.p.postData[b]})}else a.extend(d.p.postData,b);var r;d.p.searchurl&&(r=d.p.url,a(d).jqGrid("setGridParam",
{url:d.p.searchurl}));var v="stop"===a(d).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!v&&a.isFunction(e.beforeSearch)&&(v=e.beforeSearch.call(d));v||a(d).jqGrid("setGridParam",{search:o}).trigger("reloadGrid",[{page:1}]);r&&a(d).jqGrid("setGridParam",{url:r});a(d).triggerHandler("jqGridToolbarAfterSearch");a.isFunction(e.afterSearch)&&e.afterSearch.call(d)},b=a("<tr class='ui-search-toolbar' role='rowheader' data-role='content'></tr>"),h;a.each(d.p.colModel,function(){var g=this,i,k,j,m;k=
a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+d.p.direction+"'></th>");i=a("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;padding-top:0.0em;'></div>");!0===this.hidden&&a(k).css("display","none");this.search=!1===this.search?!1:!0;"undefined"==typeof this.stype&&(this.stype="text");j=a.extend({},this.searchoptions||{});if(this.search)switch(this.stype){case "select":if(m=this.surl||j.dataUrl)a.ajax(a.extend({url:m,dataType:"html",success:function(b){if(j.buildSelect!==
void 0)(b=j.buildSelect(b))&&a(i).append(b);else a(i).append(b);j.defaultValue!==void 0&&a("select",i).val(j.defaultValue);a("select",i).attr({name:g.index||g.name,id:"gs_"+g.name});j.attr&&a("select",i).attr(j.attr);a("select",i).css({width:"100%"});j.dataInit!==void 0&&j.dataInit(a("select",i)[0]);j.dataEvents!==void 0&&c(a("select",i)[0],j.dataEvents);e.autosearch===true&&a("select",i).change(function(){f();return false});b=null}},a.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{}));else{var l,o,n;
g.searchoptions?(l=void 0===g.searchoptions.value?"":g.searchoptions.value,o=void 0===g.searchoptions.separator?":":g.searchoptions.separator,n=void 0===g.searchoptions.delimiter?";":g.searchoptions.delimiter):g.editoptions&&(l=void 0===g.editoptions.value?"":g.editoptions.value,o=void 0===g.editoptions.separator?":":g.editoptions.separator,n=void 0===g.editoptions.delimiter?";":g.editoptions.delimiter);if(l){m=document.createElement("select");m.style.width="100%";a(m).attr({name:g.index||g.name,
id:"gs_"+g.name,"data-inline":"true","data-mini":"true"});var q;if("string"===typeof l){l=l.split(n);for(var r=0;r<l.length;r++)q=l[r].split(o),n=document.createElement("option"),n.value=q[0],n.innerHTML=q[1],m.appendChild(n)}else if("object"===typeof l)for(q in l)l.hasOwnProperty(q)&&(n=document.createElement("option"),n.value=q,n.innerHTML=l[q],m.appendChild(n));void 0!==j.defaultValue&&a(m).val(j.defaultValue);j.attr&&a(m).attr(j.attr);void 0!==j.dataInit&&j.dataInit(m);void 0!==j.dataEvents&&
c(m,j.dataEvents);a(i).append(m);!0===e.autosearch&&a(m).change(function(){f();return false})}}break;case "text":o=void 0!==j.defaultValue?j.defaultValue:"",a(i).append("<input type='text' style='float:right;width:95%;padding:0.2em;margin-top:0.3em;' name='"+(g.index||g.name)+"' id='gs_"+g.name+"' value='"+o+"'/>"),j.attr&&a("input",i).attr(j.attr),void 0!==j.dataInit&&j.dataInit(a("input",i)[0]),void 0!==j.dataEvents&&c(a("input",i)[0],j.dataEvents),!0===e.autosearch&&(e.searchOnEnter?a("input",
i).keypress(function(a){if((a.charCode?a.charCode:a.keyCode?a.keyCode:0)==13){f();return false}return this}):a("input",i).keydown(function(a){switch(a.which){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:h&&clearTimeout(h);h=setTimeout(function(){f()},500)}}))}a(k).append(i);a(b).append(k)});a("table thead",d.grid.hDiv).append(b);this.ftoolbar=!0;this.triggerToolbar=f;this.clearToolbar=function(b){var c={},f=0,h,b="boolean"!=typeof b?!0:b;a.each(d.p.colModel,
function(){var b;this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(b=this.searchoptions.defaultValue);h=this.index||this.name;switch(this.stype){case "select":a("#gs_"+a.jgrid.jqID(this.name)+" option",!0===this.frozen&&!0===d.p.frozenColumns?d.grid.fhDiv:d.grid.hDiv).each(function(d){if(d===0)this.selected=true;if(a(this).val()==b){this.selected=true;return false}});if(void 0!==b)c[h]=b,f++;else try{delete d.p.postData[h]}catch(e){}break;case "text":if(a("#gs_"+a.jgrid.jqID(this.name),
!0===this.frozen&&!0===d.p.frozenColumns?d.grid.fhDiv:d.grid.hDiv).val(b),void 0!==b)c[h]=b,f++;else try{delete d.p.postData[h]}catch(g){}}});var m=0<f?!0:!1;if(!0===e.stringResult||"local"==d.p.datatype){var l='{"groupOp":"'+e.groupOp+'","rules":[',o=0;a.each(c,function(a,b){0<o&&(l+=",");l+='{"field":"'+a+'",';l+='"op":"eq",';l+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';o++});l+="]}";a.extend(d.p.postData,{filters:l});a.each(["searchField","searchString","searchOper"],function(a,
b){d.p.postData.hasOwnProperty(b)&&delete d.p.postData[b]})}else a.extend(d.p.postData,c);var n;d.p.searchurl&&(n=d.p.url,a(d).jqGrid("setGridParam",{url:d.p.searchurl}));var q="stop"===a(d).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!q&&a.isFunction(e.beforeClear)&&(q=e.beforeClear.call(d));q||b&&a(d).jqGrid("setGridParam",{search:m}).trigger("reloadGrid",[{page:1}]);n&&a(d).jqGrid("setGridParam",{url:n});a(d).triggerHandler("jqGridToolbarAfterClear");a.isFunction(e.afterClear)&&e.afterClear()};
this.toggleToolbar=function(){var b=a("tr.ui-search-toolbar",d.grid.hDiv),e=!0===d.p.frozenColumns?a("tr.ui-search-toolbar",d.grid.fhDiv):!1;"none"==b.css("display")?(b.show(),e&&e.show()):(b.hide(),e&&e.hide())}}})},destroyGroupHeader:function(e){"undefined"==typeof e&&(e=!0);return this.each(function(){var c,d,f,b,h,g;d=this.grid;var i=a("table.ui-jqgrid-htable thead",d.hDiv),k=this.p.colModel;if(d){a(this).unbind(".setGroupHeaders");c=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");b=
d.headers;d=0;for(f=b.length;d<f;d++){h=k[d].hidden?"none":"";h=a(b[d].el).width(b[d].width).css("display",h);try{h.removeAttr("rowSpan")}catch(j){h.attr("rowSpan",1)}c.append(h);g=h.children("span.ui-jqgrid-resize");0<g.length&&(g[0].style.height="");h.children("div")[0].style.top=""}a(i).children("tr.ui-jqgrid-labels").remove();a(i).prepend(c);!0===e&&a(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(e){e=a.extend({useColSpanStyle:!1,groupHeaders:[]},e||{});return this.each(function(){this.p.groupHeader=
e;var c,d,f=0,b,h,g,i,k,j=this.p.colModel,m=j.length,l=this.grid.headers,o=a("table.ui-jqgrid-htable",this.grid.hDiv),n=o.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");b=o.children("thead");var q=o.find(".jqg-first-row-header");void 0===q[0]?q=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):q.empty();var r,v=function(a,b){for(var d=0,e=b.length;d<e;d++)if(b[d].startColumnName===a)return d;return-1};a(this).prepend(b);
b=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(c=0;c<m;c++)if(g=l[c].el,i=a(g),d=j[c],h={height:"0px",width:l[c].width+"px",display:d.hidden?"none":""},a("<th>",{role:"gridcell"}).css(h).addClass("ui-first-th-"+this.p.direction).appendTo(q),g.style.width="",h=v(d.name,e.groupHeaders),0<=h){h=e.groupHeaders[h];f=h.numberOfColumns;k=h.titleText;for(h=d=0;h<f&&c+h<m;h++)j[c+h].hidden||d++;h=a("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+
this.p.direction).css({height:"22px","border-top":"0px none"}).html(k);0<d&&h.attr("colspan",""+d);this.p.headertitles&&h.attr("title",h.text());0===d&&h.hide();i.before(h);b.append(g);f-=1}else 0===f?e.useColSpanStyle?i.attr("rowspan","2"):(a("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:d.hidden?"none":"","border-top":"0px none"}).insertBefore(i),b.append(g)):(b.append(g),f--);j=a(this).children("thead");j.prepend(q);b.insertAfter(n);
o.append(j);e.useColSpanStyle&&(o.find("span.ui-jqgrid-resize").each(function(){var b=a(this).parent();b.is(":visible")&&(this.style.cssText="height: "+b.height()+"px !important; cursor: col-resize;")}),o.find("div.ui-jqgrid-sortable").each(function(){var b=a(this),d=b.parent();d.is(":visible")&&d.is(":has(span.ui-jqgrid-resize)")&&b.css("top",(d.height()-b.outerHeight())/2+"px")}));r=j.find("tr.jqg-first-row-header");a(this).bind("jqGridResizeStop.setGroupHeaders",function(a,b,d){r.find("th").eq(d).width(b)})})},
setFrozenColumns:function(){return this.each(function(){if(this.grid){var e=this,c=e.p.colModel,d=0,f=c.length,b=-1,h=!1;if(!(!0===e.p.subGrid||!0===e.p.treeGrid||!0===e.p.cellEdit||e.p.sortable||e.p.scroll||e.p.grouping)){e.p.rownumbers&&d++;for(e.p.multiselect&&d++;d<f;){if(!0===c[d].frozen)h=!0,b=d;else break;d++}if(0<=b&&h){c=e.p.caption?a(e.grid.cDiv).outerHeight():0;d=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(e.p.id)).height();e.p.toppager&&(c+=a(e.grid.topDiv).outerHeight());!0===e.p.toolbar[0]&&
"bottom"!=e.p.toolbar[1]&&(c+=a(e.grid.uDiv).outerHeight());e.grid.fhDiv=a('<div style="position:absolute;left:0px;top:'+c+"px;height:"+d+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');e.grid.fbDiv=a('<div style="position:absolute;left:0px;top:'+(parseInt(c,10)+parseInt(d,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');a("#gview_"+a.jgrid.jqID(e.p.id)).append(e.grid.fhDiv);c=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(e.p.id)).clone(!0);if(e.p.groupHeader){a("tr.jqg-first-row-header, tr.jqg-third-row-header",
c).each(function(){a("th:gt("+b+")",this).remove()});var g=-1,i=-1;a("tr.jqg-second-row-header th",c).each(function(){var d=parseInt(a(this).attr("colspan"),10);d&&(g+=d,i++);if(g===b)return!1});g!==b&&(i=b);a("tr.jqg-second-row-header",c).each(function(){a("th:gt("+i+")",this).remove()})}else a("tr",c).each(function(){a("th:gt("+b+")",this).remove()});a(c).width(1);a(e.grid.fhDiv).append(c).mousemove(function(a){if(e.grid.resizing)return e.grid.dragMove(a),!1});a(e).bind("jqGridResizeStop.setFrozenColumns",
function(b,d,c){b=a(".ui-jqgrid-htable",e.grid.fhDiv);a("th:eq("+c+")",b).width(d);b=a(".ui-jqgrid-btable",e.grid.fbDiv);a("tr:first td:eq("+c+")",b).width(d)});a(e).bind("jqGridOnSortCol.setFrozenColumns",function(b,d){var c=a("tr.ui-jqgrid-labels:last th:eq("+e.p.lastsort+")",e.grid.fhDiv),f=a("tr.ui-jqgrid-labels:last th:eq("+d+")",e.grid.fhDiv);a("span.ui-grid-ico-sort",c).addClass("ui-state-disabled");a(c).attr("aria-selected","false");a("span.ui-icon-"+e.p.sortorder,f).removeClass("ui-state-disabled");
a(f).attr("aria-selected","true");!e.p.viewsortcols[0]&&e.p.lastsort!=d&&(a("span.s-ico",c).hide(),a("span.s-ico",f).show())});a("#gview_"+a.jgrid.jqID(e.p.id)).append(e.grid.fbDiv);jQuery(e.grid.bDiv).scroll(function(){jQuery(e.grid.fbDiv).scrollTop(jQuery(this).scrollTop())});!0===e.p.hoverrows&&a("#"+a.jgrid.jqID(e.p.id)).unbind("mouseover").unbind("mouseout");a(e).bind("jqGridAfterGridComplete.setFrozenColumns",function(){a("#"+a.jgrid.jqID(e.p.id)+"_frozen").remove();jQuery(e.grid.fbDiv).height(jQuery(e.grid.bDiv).height()-
16);var d=a("#"+a.jgrid.jqID(e.p.id)).clone(!0);a("tr",d).each(function(){a("td:gt("+b+")",this).remove()});a(d).width(1).attr("id",e.p.id+"_frozen");a(e.grid.fbDiv).append(d);!0===e.p.hoverrows&&(a("tr.jqgrow",d).hover(function(){a(this).addClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(e.p.id)).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(e.p.id)).removeClass("ui-state-hover")}),a("tr.jqgrow","#"+
a.jgrid.jqID(e.p.id)).hover(function(){a(this).addClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(e.p.id)+"_frozen").addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover");a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(e.p.id)+"_frozen").removeClass("ui-state-hover")}));d=null});e.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){a(this.grid.fhDiv).remove();a(this.grid.fbDiv).remove();
this.grid.fhDiv=null;this.grid.fbDiv=null;a(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var e;a("#"+a.jgrid.jqID(this.p.id)).bind("mouseover",function(c){e=a(c.target).closest("tr.jqgrow");"ui-subgrid"!==a(e).attr("class")&&a(e).addClass("ui-state-hover")}).bind("mouseout",function(c){e=a(c.target).closest("tr.jqgrow");a(e).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})})(jQuery);
(function(a){a.fmatter={};a.extend(a.fmatter,{isBoolean:function(a){return"boolean"===typeof a},isObject:function(e){return e&&("object"===typeof e||a.isFunction(e))||!1},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"===typeof a},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(e){if(!this.isString(e)&&
this.isValue(e))return!1;if(!this.isValue(e))return!0;e=a.trim(e).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===e}});a.fn.fmatter=function(e,c,d,f,b){var h=c,d=a.extend({},a.jgrid.formatter,d);try{h=a.fn.fmatter[e].call(this,c,d,f,b)}catch(g){}return h};a.fmatter.util={NumberFormat:function(e,c){a.fmatter.isNumber(e)||(e*=1);if(a.fmatter.isNumber(e)){var d=0>e,f=e+"",b=c.decimalSeparator?c.decimalSeparator:".",h;if(a.fmatter.isNumber(c.decimalPlaces)){var g=c.decimalPlaces,f=Math.pow(10,
g),f=Math.round(e*f)/f+"";h=f.lastIndexOf(".");if(0<g){0>h?(f+=b,h=f.length-1):"."!==b&&(f=f.replace(".",b));for(;f.length-1-h<g;)f+="0"}}if(c.thousandsSeparator){g=c.thousandsSeparator;h=f.lastIndexOf(b);h=-1<h?h:f.length;for(var b=f.substring(h),i=-1,k=h;0<k;k--){i++;if(0===i%3&&k!==h&&(!d||1<k))b=g+b;b=f.charAt(k-1)+b}f=b}f=c.prefix?c.prefix+f:f;return f=c.suffix?f+c.suffix:f}return e},DateFormat:function(e,c,d,f){var b=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,h="string"===
typeof c?c.match(b):null,b=function(a,b){a=""+a;for(b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},i=0,k,j=["i18n"];j.i18n={dayNames:f.dayNames,monthNames:f.monthNames};e in f.masks&&(e=f.masks[e]);if(!isNaN(c-0)&&"u"==(""+e).toLowerCase())i=new Date(1E3*parseFloat(c));else if(c.constructor===Date)i=c;else if(null!==h)i=new Date(parseInt(h[1],10)),h[3]&&(e=60*Number(h[5])+Number(h[6]),e*="-"==h[4]?1:-1,e-=i.getTimezoneOffset(),i.setTime(Number(Number(i)+6E4*e)));
else{c=(""+c).split(/[\\\/:_;.,\t\T\s-]/);e=e.split(/[\\\/:_;.,\t\T\s-]/);h=0;for(k=e.length;h<k;h++)"M"==e[h]&&(i=a.inArray(c[h],j.i18n.monthNames),-1!==i&&12>i&&(c[h]=i+1)),"F"==e[h]&&(i=a.inArray(c[h],j.i18n.monthNames),-1!==i&&11<i&&(c[h]=i+1-12)),c[h]&&(g[e[h].toLowerCase()]=parseInt(c[h],10));g.f&&(g.m=g.f);if(0===g.m&&0===g.y&&0===g.d)return"&#160;";g.m=parseInt(g.m,10)-1;i=g.y;70<=i&&99>=i?g.y=1900+g.y:0<=i&&69>=i&&(g.y=2E3+g.y);i=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}d in f.masks?d=f.masks[d]:
d||(d="Y-m-d");e=i.getHours();c=i.getMinutes();g=i.getDate();h=i.getMonth()+1;k=i.getTimezoneOffset();var m=i.getSeconds(),l=i.getMilliseconds(),o=i.getDay(),n=i.getFullYear(),q=(o+6)%7+1,r=(new Date(n,h-1,g)-new Date(n,0,1))/864E5,v={d:b(g),D:j.i18n.dayNames[o],j:g,l:j.i18n.dayNames[o+7],N:q,S:f.S(g),w:o,z:r,W:5>q?Math.floor((r+q-1)/7)+1:Math.floor((r+q-1)/7)||(4>((new Date(n-1,0,1)).getDay()+6)%7?53:52),F:j.i18n.monthNames[h-1+12],m:b(h),M:j.i18n.monthNames[h-1],n:h,t:"?",L:"?",o:"?",Y:n,y:(""+
n).substring(2),a:12>e?f.AmPm[0]:f.AmPm[1],A:12>e?f.AmPm[2]:f.AmPm[3],B:"?",g:e%12||12,G:e,h:b(e%12||12),H:b(e),i:b(c),s:b(m),u:l,e:"?",I:"?",O:(0<k?"-":"+")+b(100*Math.floor(Math.abs(k)/60)+Math.abs(k)%60,4),P:"?",T:((""+i).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(i/1E3)};return d.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,
function(a){return a in v?v[a]:a.substring(1)})}};a.fn.fmatter.defaultFormat=function(e,c){return a.fmatter.isValue(e)&&""!==e?e:c.defaultValue?c.defaultValue:"&#160;"};a.fn.fmatter.email=function(e,c){return a.fmatter.isEmpty(e)?a.fn.fmatter.defaultFormat(e,c):'<a href="mailto:'+e+'">'+e+"</a>"};a.fn.fmatter.checkbox=function(e,c){var d=a.extend({},c.checkbox),f;void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));f=!0===d.disabled?'disabled="disabled"':
"";if(a.fmatter.isEmpty(e)||a.fmatter.isUndefined(e))e=a.fn.fmatter.defaultFormat(e,d);e=(e+"").toLowerCase();d=0>e.search(/(false|0|no|off)/i)?" checked='checked' ":"";return'<input data-role="none"  id="jqgridcheck'+Math.floor(11*Math.random())+'" type="checkbox" '+d+' value="'+e+'" offval="no" '+f+"/>"};a.fn.fmatter.link=function(e,c){var d={target:c.target},f="";void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));d.target&&(f="target="+
d.target);return!a.fmatter.isEmpty(e)?"<a "+f+' href="'+e+'">'+e+"</a>":a.fn.fmatter.defaultFormat(e,c)};a.fn.fmatter.showlink=function(e,c){var d={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},f="";void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));d.target&&(f="target="+d.target);d=d.baseLinkUrl+d.showAction+"?"+d.idName+"="+c.rowId+d.addParam;return a.fmatter.isString(e)||
a.fmatter.isNumber(e)?"<a "+f+' href="'+d+'">'+e+"</a>":a.fn.fmatter.defaultFormat(e,c)};a.fn.fmatter.integer=function(e,c){var d=a.extend({},c.integer);void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));return a.fmatter.isEmpty(e)?d.defaultValue:a.fmatter.util.NumberFormat(e,d)};a.fn.fmatter.number=function(e,c){var d=a.extend({},c.number);void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));
return a.fmatter.isEmpty(e)?d.defaultValue:a.fmatter.util.NumberFormat(e,d)};a.fn.fmatter.currency=function(e,c){var d=a.extend({},c.currency);void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));return a.fmatter.isEmpty(e)?d.defaultValue:a.fmatter.util.NumberFormat(e,d)};a.fn.fmatter.date=function(e,c,d,f){d=a.extend({},c.date);void 0!==c.colModel&&!a.fmatter.isUndefined(c.colModel.formatoptions)&&(d=a.extend({},d,c.colModel.formatoptions));
return!d.reformatAfterEdit&&"edit"==f||a.fmatter.isEmpty(e)?a.fn.fmatter.defaultFormat(e,c):a.fmatter.util.DateFormat(d.srcformat,e,d.newformat,d)};a.fn.fmatter.select=function(e,c){var e=e+"",d=!1,f=[],b,h;a.fmatter.isUndefined(c.colModel.formatoptions)?a.fmatter.isUndefined(c.colModel.editoptions)||(d=c.colModel.editoptions.value,b=void 0===c.colModel.editoptions.separator?":":c.colModel.editoptions.separator,h=void 0===c.colModel.editoptions.delimiter?";":c.colModel.editoptions.delimiter):(d=c.colModel.formatoptions.value,
b=void 0===c.colModel.formatoptions.separator?":":c.colModel.formatoptions.separator,h=void 0===c.colModel.formatoptions.delimiter?";":c.colModel.formatoptions.delimiter);if(d){var g=!0===c.colModel.editoptions.multiple?!0:!1,i=[];g&&(i=e.split(","),i=a.map(i,function(b){return a.trim(b)}));if(a.fmatter.isString(d))for(var k=d.split(h),j=0,m=0;m<k.length;m++)if(h=k[m].split(b),2<h.length&&(h[1]=a.map(h,function(a,b){if(b>0)return a}).join(b)),g)-1<a.inArray(h[0],i)&&(f[j]=h[1],j++);else{if(a.trim(h[0])==
a.trim(e)){f[0]=h[1];break}}else a.fmatter.isObject(d)&&(g?f=a.map(i,function(a){return d[a]}):f[0]=d[e]||"")}e=f.join(", ");return""===e?a.fn.fmatter.defaultFormat(e,c):e};a.fn.fmatter.rowactions=function(e,c,d,f){var b={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},e=a.jgrid.jqID(e),c=a.jgrid.jqID(c),f=a("#"+c)[0].p.colModel[f];a.fmatter.isUndefined(f.formatoptions)||(b=a.extend(b,
f.formatoptions));a.fmatter.isUndefined(a("#"+c)[0].p.editOptions)||(b.editOptions=a("#"+c)[0].p.editOptions);a.fmatter.isUndefined(a("#"+c)[0].p.delOptions)||(b.delOptions=a("#"+c)[0].p.delOptions);var h=a("#"+c)[0],f=function(d){a.isFunction(b.afterRestore)&&b.afterRestore.call(h,d);a("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+c+".ui-jqgrid-btable:first").show();a("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+c+".ui-jqgrid-btable:first").hide()};if(a("#"+e,
"#"+c).hasClass("jqgrid-new-row")){var g=h.p.prmNames;b.extraparam[g.oper]=g.addoper}g={keys:b.keys,oneditfunc:b.onEdit,successfunc:b.onSuccess,url:b.url,extraparam:b.extraparam,aftersavefunc:function(d,f){a.isFunction(b.afterSave)&&b.afterSave.call(h,d,f);a("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+c+".ui-jqgrid-btable:first").show();a("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+c+".ui-jqgrid-btable:first").hide()},errorfunc:b.onError,afterrestorefunc:f,restoreAfterError:b.restoreAfterError,
mtype:b.mtype};switch(d){case "edit":a("#"+c).jqGrid("editRow",e,g);a("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+c+".ui-jqgrid-btable:first").hide();a("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+c+".ui-jqgrid-btable:first").show();a(h).triggerHandler("jqGridAfterGridComplete");break;case "save":a("#"+c).jqGrid("saveRow",e,g)&&(a("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+c+".ui-jqgrid-btable:first").show(),a("tr#"+e+" div.ui-inline-save, tr#"+
e+" div.ui-inline-cancel","#"+c+".ui-jqgrid-btable:first").hide(),a(h).triggerHandler("jqGridAfterGridComplete"));break;case "cancel":a("#"+c).jqGrid("restoreRow",e,f);a("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+c+".ui-jqgrid-btable:first").show();a("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+c+".ui-jqgrid-btable:first").hide();a(h).triggerHandler("jqGridAfterGridComplete");break;case "del":a("#"+c).jqGrid("delGridRow",e,b.delOptions);break;case "formedit":a("#"+
c).jqGrid("setSelection",e),a("#"+c).jqGrid("editGridRow",e,b.editOptions)}};a.fn.fmatter.actions=function(e,c){var d={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};a.fmatter.isUndefined(c.colModel.formatoptions)||(d=a.extend(d,c.colModel.formatoptions));var f=c.rowId,b="",h;if("undefined"==typeof f||a.fmatter.isEmpty(f))return"";d.editformbutton?(h="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+c.gid+"','formedit',"+c.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",
b=b+"<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+h+"><span class='ui-icon ui-icon-pencil'></span></div>"):d.editbutton&&(h="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+c.gid+"','edit',"+c.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",b=b+"<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+h+"><span class='ui-icon ui-icon-pencil'></span></div>");
d.delbutton&&(h="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+c.gid+"','del',"+c.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",b=b+"<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+h+"><span class='ui-icon ui-icon-trash'></span></div>");h="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+c.gid+"','save',"+c.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";
b=b+"<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+h+"><span class='ui-icon ui-icon-disk'></span></div>";h="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+c.gid+"','cancel',"+c.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";b=b+"<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+h+"><span class='ui-icon ui-icon-cancel'></span></div>";
return"<div style='margin-left:8px;'>"+b+"</div>"};a.unformat=function(e,c,d,f){var b,h=c.colModel.formatter,g=c.colModel.formatoptions||{},i=/([\.\*\_\'\(\)\{\}\+\?\\])/g,k=c.colModel.unformat||a.fn.fmatter[h]&&a.fn.fmatter[h].unformat;if("undefined"!==typeof k&&a.isFunction(k))b=k.call(this,a(e).text(),c,e);else if(!a.fmatter.isUndefined(h)&&a.fmatter.isString(h))switch(b=a.jgrid.formatter||{},h){case "integer":g=a.extend({},b.integer,g);c=g.thousandsSeparator.replace(i,"\\$1");b=a(e).text().replace(RegExp(c,
"g"),"");break;case "number":g=a.extend({},b.number,g);c=g.thousandsSeparator.replace(i,"\\$1");b=a(e).text().replace(RegExp(c,"g"),"").replace(g.decimalSeparator,".");break;case "currency":g=a.extend({},b.currency,g);c=g.thousandsSeparator.replace(i,"\\$1");c=RegExp(c,"g");b=a(e).text();g.prefix&&g.prefix.length&&(b=b.substr(g.prefix.length));g.suffix&&g.suffix.length&&(b=b.substr(0,b.length-g.suffix.length));b=b.replace(c,"").replace(g.decimalSeparator,".");break;case "checkbox":g=c.colModel.editoptions?
c.colModel.editoptions.value.split(":"):["Yes","No"];b=a("input",e).is(":checked")?g[0]:g[1];break;case "select":b=a.unformat.select(e,c,d,f);break;case "actions":return"";default:b=a(e).text()}return void 0!==b?b:!0===f?a(e).text():a.jgrid.htmlDecode(a(e).html())};a.unformat.select=function(e,c,d,f){d=[];e=a(e).text();if(!0===f)return e;var f=a.extend({},!a.fmatter.isUndefined(c.colModel.formatoptions)?c.colModel.formatoptions:c.colModel.editoptions),c=void 0===f.separator?":":f.separator,b=void 0===
f.delimiter?";":f.delimiter;if(f.value){var h=f.value,f=!0===f.multiple?!0:!1,g=[];f&&(g=e.split(","),g=a.map(g,function(b){return a.trim(b)}));if(a.fmatter.isString(h))for(var i=h.split(b),k=0,j=0;j<i.length;j++)if(b=i[j].split(c),2<b.length&&(b[1]=a.map(b,function(a,b){if(b>0)return a}).join(c)),f)-1<a.inArray(b[1],g)&&(d[k]=b[0],k++);else{if(a.trim(b[1])==a.trim(e)){d[0]=b[0];break}}else if(a.fmatter.isObject(h)||a.isArray(h))f||(g[0]=e),d=a.map(g,function(b){var d;a.each(h,function(a,e){if(e==
b){d=a;return false}});if(typeof d!="undefined")return d});return d.join(", ")}return e||""};a.unformat.date=function(e,c){var d=a.jgrid.formatter.date||{};a.fmatter.isUndefined(c.formatoptions)||(d=a.extend({},d,c.formatoptions));return!a.fmatter.isEmpty(e)?a.fmatter.util.DateFormat(d.newformat,e,d.srcformat,d):a.fn.fmatter.defaultFormat(e,c)}})(jQuery);
(function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var e;this.p.subGridOptions=a.extend({plusicon:"ui-icon-arrow-r",minusicon:"ui-icon-arrow-d",openicon:"",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.browser.safari||a.browser.webkit?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});
e=this.p.subGridModel;if(e[0]){e[0].align=a.extend([],e[0].align||[]);for(var c=0;c<e[0].name.length;c++)e[0].align[c]=e[0].align[c]||"left"}})},addSubGridCell:function(a,c){var d="",f,b;this.each(function(){d=this.formatCol(a,c);b=this.p.id;f=this.p.subGridOptions.plusicon});return'<td role="gridcell" aria-describedby="'+b+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+d+"><a href='javascript:void(0);'><span class='ui-icon "+f+" ui-icon-shadow'></span></a></td>"},addSubGrid:function(e,c){return this.each(function(){var d=
this;if(d.grid){var f=function(b,e,c){e=a("<td align='"+d.p.subGridModel[0].align[c]+"'></td>").html(e);a(b).append(e)},b=function(b,e){var c,g,h,i=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),j=a("<tr></tr>");for(g=0;g<d.p.subGridModel[0].name.length;g++)c=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>"),a(c).html(d.p.subGridModel[0].name[g]),a(c).width(d.p.subGridModel[0].width[g]),a(j).append(c);a(i).append(j);b&&(h=d.p.xmlReader.subgrid,
a(h.root+" "+h.row,b).each(function(){j=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===h.repeatitems)a(h.cell,this).each(function(b){f(j,a(this).text()||"&#160;",b)});else{var b=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(b)for(g=0;g<b.length;g++)f(j,a(b[g],this).text()||"&#160;",g)}a(i).append(j)}));c=a("table:first",d.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(c+e)).append(i);d.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(d.p.id)).hide();return!1},h=function(b,e){var c,
g,h,i,j,k=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=a("<tr></tr>");for(g=0;g<d.p.subGridModel[0].name.length;g++)c=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>"),a(c).html(d.p.subGridModel[0].name[g]),a(c).width(d.p.subGridModel[0].width[g]),a(l).append(c);a(k).append(l);if(b&&(i=d.p.jsonReader.subgrid,c=a.jgrid.getAccessor(b,i.root),"undefined"!==typeof c))for(g=0;g<c.length;g++){h=c[g];l=a("<tr class='ui-widget-content ui-subtblcell'></tr>");
if(!0===i.repeatitems){i.cell&&(h=h[i.cell]);for(j=0;j<h.length;j++)f(l,h[j]||"&#160;",j)}else{var m=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(m.length)for(j=0;j<m.length;j++)f(l,h[m[j]]||"&#160;",j)}a(k).append(l)}g=a("table:first",d.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(g+e)).append(k);d.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(d.p.id)).hide();return!1},g=function(e){var c,f,g,i;c=a(e).attr("id");f={nd_:(new Date).getTime()};f[d.p.prmNames.subgridid]=c;if(!d.p.subGridModel[0])return!1;
if(d.p.subGridModel[0].params)for(i=0;i<d.p.subGridModel[0].params.length;i++)for(g=0;g<d.p.colModel.length;g++)d.p.colModel[g].name===d.p.subGridModel[0].params[i]&&(f[d.p.colModel[g].name]=a("td:eq("+g+")",e).text().replace(/\&#160\;/ig,""));if(!d.grid.hDiv.loading)switch(d.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(d.p.id)).show(),d.p.subgridtype||(d.p.subgridtype=d.p.datatype),a.isFunction(d.p.subgridtype)?d.p.subgridtype.call(d,f):d.p.subgridtype=d.p.subgridtype.toLowerCase(),d.p.subgridtype){case "xml":case "json":a.ajax(a.extend({type:d.p.mtype,
async:!1,url:d.p.subGridUrl,dataType:d.p.subgridtype,data:a.isFunction(d.p.serializeSubGridData)?d.p.serializeSubGridData.call(d,f):f,complete:function(e){d.p.subgridtype==="xml"?b(e.responseXML,c):h(a.jgrid.parse(e.responseText),c)}},a.jgrid.ajaxOptions,d.p.ajaxSubgridOptions||{}))}return!1},i,k,j,m=0,l,o;a.each(d.p.colModel,function(){(!0===this.hidden||"rn"===this.name||"cb"===this.name)&&m++});var n=d.rows.length,q=1,r;void 0!==c&&0<c&&(q=c,n=c+1);for(;q<n;)a(d.rows[q]).hasClass("jqgrow")&&a(d.rows[q].cells[e]).bind("click",
function(){var b=a(this).parent("tr")[0];o=b.nextSibling;if(a(this).hasClass("sgcollapsed")){k=d.p.id;i=b.id;if(d.p.subGridOptions.reloadOnExpand===true||d.p.subGridOptions.reloadOnExpand===false&&!a(o).hasClass("ui-subgrid")){j=e>=1?"<td colspan='"+e+"'>&#160;</td>":"";l=a(d).triggerHandler("jqGridSubGridBeforeExpand",[k+"_"+i,i]);(l=l===false||l==="stop"?false:true)&&a.isFunction(d.p.subGridBeforeExpand)&&(l=d.p.subGridBeforeExpand.call(d,k+"_"+i,i));if(l===false)return false;a(b).after("<tr role='row' class='ui-subgrid'>"+
j+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+d.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(d.p.colNames.length-1-m,10)+"' class='ui-widget-content subgrid-data'><div id="+k+"_"+i+" class='tablediv'></div></td></tr>");a(d).triggerHandler("jqGridSubGridRowExpanded",[k+"_"+i,i]);a.isFunction(d.p.subGridRowExpanded)?d.p.subGridRowExpanded.call(d,k+"_"+i,i):g(b)}else a(o).show();a(this).html("<a href='#'><span class='ui-icon "+d.p.subGridOptions.minusicon+" ui-icon-shadow'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");
d.p.subGridOptions.selectOnExpand&&a(d).jqGrid("setSelection",i)}else if(a(this).hasClass("sgexpanded")){l=a(d).triggerHandler("jqGridSubGridRowColapsed",[k+"_"+i,i]);if((l=l===false||l==="stop"?false:true)&&a.isFunction(d.p.subGridRowColapsed)){i=b.id;l=d.p.subGridRowColapsed.call(d,k+"_"+i,i)}if(l===false)return false;d.p.subGridOptions.reloadOnExpand===true?a(o).remove(".ui-subgrid"):a(o).hasClass("ui-subgrid")&&a(o).hide();a(this).html("<a href='#'><span class='ui-icon "+d.p.subGridOptions.plusicon+
" ui-icon-shadow'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}a("#"+d.p.id).trigger("create");r&&clearTimeout(r);r=setTimeout(function(){d.endReq()},500);return false}),q++;!0===d.p.subGridOptions.expandOnLoad&&a(d.rows).filter(".jqgrow").each(function(b,d){a(d.cells[0]).click()});a("#"+d.p.id).trigger("create");d.subGridXml=function(a,d){b(a,d)};d.subGridJson=function(a,b){h(a,b)}}})},expandSubGridRow:function(e){return this.each(function(){if((this.grid||e)&&!0===this.p.subGrid){var c=
a(this).jqGrid("getInd",e,!0);c&&(c=a("td.sgcollapsed",c)[0])&&a(c).trigger("click")}})},collapseSubGridRow:function(e){return this.each(function(){if((this.grid||e)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",e,!0);c&&(c=a("td.sgexpanded",c)[0])&&a(c).trigger("click")}})},toggleSubGridRow:function(e){return this.each(function(){if((this.grid||e)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",e,!0);if(c){var d=a("td.sgcollapsed",c)[0];d?a(d).trigger("click"):(d=a("td.sgexpanded",c)[0])&&
a(d).trigger("click")}}})}})})(jQuery);
(function(a,e){function c(a){if(""===b)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return b+a}var d=Math,f=e.createElement("div").style,b=function(){for(var a=["t","webkitT","MozT","msT","OT"],b,d=0,e=a.length;d<e;d++)if(b=a[d]+"ransform",b in f)return a[d].substr(0,a[d].length-1);return!1}(),h=b?"-"+b.toLowerCase()+"-":"",g=c("transform"),i=c("transitionProperty"),k=c("transitionDuration"),j=c("transformOrigin"),m=c("transitionTimingFunction"),l=c("transitionDelay"),o=/android/gi.test(navigator.appVersion),
n=/iphone|ipad/gi.test(navigator.appVersion),q=/hp-tablet/gi.test(navigator.appVersion),r=c("perspective")in f,v="ontouchstart"in a&&!q,G=!!b,Q=c("transition")in f,O="onorientationchange"in a?"orientationchange":"resize",P=v?"touchstart":"mousedown",J=v?"touchmove":"mousemove",B=v?"touchend":"mouseup",H=v?"touchcancel":"mouseup",I="Moz"==b?"DOMMouseScroll":"mousewheel",E;E=!1===b?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[b];var Z=
function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),R=a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout,F=r?" translateZ(0)":"",q=function(b,d){var c=this,f;c.wrapper="object"==typeof b?b:e.getElementById(b);
c.wrapper.style.overflow="hidden";c.scroller=c.wrapper.children[0];c.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:o,hideScrollbar:n,fadeScrollbar:n&&r,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,
onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(f in d)c.options[f]=d[f];c.x=c.options.x;c.y=c.options.y;c.options.useTransform=G&&c.options.useTransform;c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.options.zoom=c.options.useTransform&&c.options.zoom;c.options.useTransition=Q&&c.options.useTransition;c.options.zoom&&
o&&(F="");c.scroller.style[i]=c.options.useTransform?h+"transform":"top left";c.scroller.style[k]="0";c.scroller.style[j]="0 0";c.options.useTransition&&(c.scroller.style[m]="cubic-bezier(0.33,0.66,0.66,1)");c.options.useTransform?c.scroller.style[g]="translate("+c.x+"px,"+c.y+"px)"+F:c.scroller.style.cssText+=";position:absolute;top:"+c.y+"px;left:"+c.x+"px";c.options.useTransition&&(c.options.fixedScrollbar=!0);c.refresh();c._bind(O,a);c._bind(P);v||"none"!=c.options.wheelAction&&c._bind(I);c.options.checkDOMChanges&&
(c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500))};q.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case P:if(!v&&0!==a.button)break;this._start(a);break;case J:this._move(a);break;case B:case H:this._end(a);break;case O:this._resize();break;case I:this._wheel(a);break;case E:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||
this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(a){var b;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(b=e.createElement("div"),this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),
b.style.cssText+=";pointer-events:none;"+h+"transition-property:opacity;"+h+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(b),this[a+"ScrollbarWrapper"]=b,b=e.createElement("div"),this.options.scrollbarClass||(b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+h+"background-clip:padding-box;"+h+"box-sizing:border-box;"+("h"==a?"height:100%":
"width:100%")+";"+h+"border-radius:3px;border-radius:3px"),b.style.cssText+=";pointer-events:none;"+h+"transition-property:"+h+"transform;"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+h+"transition-duration:0;"+h+"transform: translate(0,0)"+F,this.options.useTransition&&(b.style.cssText+=";"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(b),this[a+"ScrollbarIndicator"]=b),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,
this.hScrollbarIndicatorSize=d.max(d.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=d.max(d.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=
this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):this[a+"ScrollbarWrapper"]&&(G&&(this[a+"ScrollbarIndicator"].style[g]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},o?200:0)},_pos:function(a,
b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[g]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+F:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var e="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(e*=this[a+"ScrollbarProp"],0>e?(this.options.fixedScrollbar||(e=this[a+"ScrollbarIndicatorSize"]+d.round(3*e),
8>e&&(e=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=e+"px"),e=0):e>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?e=this[a+"ScrollbarMaxScroll"]:(e=this[a+"ScrollbarIndicatorSize"]-d.round(3*(e-this[a+"ScrollbarMaxScroll"])),8>e&&(e=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=e+"px",e=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-e))),this[a+"ScrollbarWrapper"].style[l]="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?
"0":"1",this[a+"ScrollbarIndicator"].style[g]="translate("+("h"==a?e+"px,0)":"0,"+e+"px)")+F)},_start:function(b){var e=v?b.touches[0]:b,c,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&v&&1<b.touches.length&&(f=d.abs(b.touches[0].pageX-b.touches[1].pageX),
c=d.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDistStart=d.sqrt(f*f+c*c),this.originX=d.abs(b.touches[0].pageX+b.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=d.abs(b.touches[0].pageY+b.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&(this.options.useTransform?(c=getComputedStyle(this.scroller,null)[g].replace(/[^0-9\-.,]/g,"").split(","),f=+c[4],c=+c[5]):(f=+getComputedStyle(this.scroller,
null).left.replace(/[^0-9-]/g,""),c=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),f!=this.x||c!=this.y))this.options.useTransition?this._unbind(E):R(this.aniTime),this.steps=[],this._pos(f,c),this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=e.pageX;this.pointY=e.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);
this._bind(J,a);this._bind(B,a);this._bind(H,a)}},_move:function(a){var b=v?a.touches[0]:a,e=b.pageX-this.pointX,c=b.pageY-this.pointY,f=this.x+e,h=this.y+c,i=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&v&&1<a.touches.length)f=d.abs(a.touches[0].pageX-a.touches[1].pageX),h=d.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDist=d.sqrt(f*f+h*h),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,
b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,f=this.originX-this.originX*this.lastScale+this.x,h=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[g]="translate("+f+"px,"+h+"px) scale("+b+")"+F,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<f||f<this.maxScrollX)f=this.options.bounce?
this.x+e/2:0<=f||0<=this.maxScrollX?0:this.maxScrollX;if(h>this.minScrollY||h<this.maxScrollY)h=this.options.bounce?this.y+c/2:h>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=e;this.distY+=c;this.absDistX=d.abs(this.distX);this.absDistY=d.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(h=this.y,c=0):this.absDistY>this.absDistX+5&&(f=this.x,e=0)),this.moved=!0,this._pos(f,h),this.dirX=0<e?-1:0>e?1:0,this.dirY=
0<c?-1:0>c?1:0,300<i-this.startTime&&(this.startTime=i,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(b){if(!(v&&0!==b.touches.length)){var c=this,f=v?b.changedTouches[0]:b,h,i,j={dist:0,time:0},l={dist:0,time:0},m=(b.timeStamp||Date.now())-c.startTime,n=c.x,o=c.y;c._unbind(J,a);c._unbind(B,a);c._unbind(H,a);c.options.onBeforeScrollEnd&&c.options.onBeforeScrollEnd.call(c,b);if(c.zoomed)n=c.scale*c.lastScale,n=Math.max(c.options.zoomMin,
n),n=Math.min(c.options.zoomMax,n),c.lastScale=n/c.scale,c.scale=n,c.x=c.originX-c.originX*c.lastScale+c.x,c.y=c.originY-c.originY*c.lastScale+c.y,c.scroller.style[k]="200ms",c.scroller.style[g]="translate("+c.x+"px,"+c.y+"px) scale("+c.scale+")"+F,c.zoomed=!1,c.refresh(),c.options.onZoomEnd&&c.options.onZoomEnd.call(c,b);else{if(c.moved){if(300>m&&c.options.momentum){j=n?c._momentum(n-c.startX,m,-c.x,c.scrollerW-c.wrapperW+c.x,c.options.bounce?c.wrapperW:0):j;l=o?c._momentum(o-c.startY,m,-c.y,0>
c.maxScrollY?c.scrollerH-c.wrapperH+c.y-c.minScrollY:0,c.options.bounce?c.wrapperH:0):l;n=c.x+j.dist;o=c.y+l.dist;if(0<c.x&&0<n||c.x<c.maxScrollX&&n<c.maxScrollX)j={dist:0,time:0};if(c.y>c.minScrollY&&o>c.minScrollY||c.y<c.maxScrollY&&o<c.maxScrollY)l={dist:0,time:0}}j.dist||l.dist?(j=d.max(d.max(j.time,l.time),10),c.options.snap&&(l=n-c.absStartX,m=o-c.absStartY,d.abs(l)<c.options.snapThreshold&&d.abs(m)<c.options.snapThreshold?c.scrollTo(c.absStartX,c.absStartY,200):(l=c._snap(n,o),n=l.x,o=l.y,
j=d.max(l.time,j))),c.scrollTo(d.round(n),d.round(o),j)):c.options.snap?(l=n-c.absStartX,m=o-c.absStartY,d.abs(l)<c.options.snapThreshold&&d.abs(m)<c.options.snapThreshold?c.scrollTo(c.absStartX,c.absStartY,200):(l=c._snap(c.x,c.y),(l.x!=c.x||l.y!=c.y)&&c.scrollTo(l.x,l.y,l.time))):c._resetPos(200)}else v&&(c.doubleTapTimer&&c.options.zoom?(clearTimeout(c.doubleTapTimer),c.doubleTapTimer=null,c.options.onZoomStart&&c.options.onZoomStart.call(c,b),c.zoom(c.pointX,c.pointY,1==c.scale?c.options.doubleTapZoom:
1),c.options.onZoomEnd&&setTimeout(function(){c.options.onZoomEnd.call(c,b)},200)):this.options.handleClick&&(c.doubleTapTimer=setTimeout(function(){c.doubleTapTimer=null;for(h=f.target;1!=h.nodeType;)h=h.parentNode;"SELECT"!=h.tagName&&"INPUT"!=h.tagName&&"TEXTAREA"!=h.tagName&&(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,b.view,1,f.screenX,f.screenY,f.clientX,f.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),i._fake=!0,h.dispatchEvent(i))},c.options.zoom?250:0))),c._resetPos(400);
c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b)}}},_resetPos:function(a){var d=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(d==this.x&&c==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==b&&(this.hScrollbarWrapper.style[l]="300ms"),this.hScrollbarWrapper.style.opacity=
"0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==b&&(this.vScrollbarWrapper.style[l]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(d,c,a||0)},_wheel:function(a){var b=this,d,c;if("wheelDeltaX"in a)d=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("wheelDelta"in a)d=c=a.wheelDelta/12;else if("detail"in a)d=c=3*-a.detail;else return;if("zoom"==b.options.wheelAction){if(c=b.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),c<b.options.zoomMin&&(c=b.options.zoomMin),c>b.options.zoomMax&&
(c=b.options.zoomMax),c!=b.scale)!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,c,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400)}else d=b.x+d,c=b.y+c,0<d?d=0:d<b.maxScrollX&&(d=b.maxScrollX),c>b.minScrollY?c=b.minScrollY:c<b.maxScrollY&&(c=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(d,c,0)},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(E),
this._startAni())},_startAni:function(){var a=this,b=a.x,c=a.y,e=Date.now(),f,g,h;a.animating||(a.steps.length?(f=a.steps.shift(),f.x==b&&f.y==c&&(f.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)?(a._transitionTime(f.time),a._pos(f.x,f.y),a.animating=!1,f.time?a._bind(E):a._resetPos(0)):(h=function(){var i=Date.now();if(i>=e+f.time){a._pos(f.x,f.y);a.animating=false;a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a);a._startAni()}else{i=(i-e)/f.time-1;g=d.sqrt(1-i*i);i=(f.x-b)*
g+b;a._pos(i,(f.y-c)*g+c);if(a.animating)a.aniTime=Z(h)}},h()):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[k]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[k]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[k]=a)},_momentum:function(a,b,c,e,f){var b=d.abs(a)/b,g=b*b/0.0012;0<a&&g>c?(c+=f/(6/(6.0E-4*(g/b))),b=b*c/g,g=c):0>a&&g>e&&(e+=f/(6/(6.0E-4*(g/b))),b=b*e/g,g=e);return{dist:g*(0>a?-1:1),time:d.round(b/6.0E-4)}},_offset:function(a){for(var b=-a.offsetLeft,
d=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,d-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,d*=this.scale);return{left:b,top:d}},_snap:function(a,b){var c,e,f;f=this.pagesX.length-1;c=0;for(e=this.pagesX.length;c<e;c++)if(a>=this.pagesX[c]){f=c;break}f==this.currPageX&&0<f&&0>this.dirX&&f--;a=this.pagesX[f];e=(e=d.abs(a-this.pagesX[this.currPageX]))?500*(d.abs(this.x-a)/e):0;this.currPageX=f;f=this.pagesY.length-1;for(c=0;c<f;c++)if(b>=this.pagesY[c]){f=c;break}f==this.currPageY&&0<f&&0>this.dirY&&
f--;b=this.pagesY[f];c=(c=d.abs(b-this.pagesY[this.currPageY]))?500*(d.abs(this.y-b)/c):0;this.currPageY=f;f=d.round(d.max(e,c))||200;return{x:a,y:b,time:f}},_bind:function(a,b,d){(b||this.scroller).addEventListener(a,this,!!d)},_unbind:function(a,b,d){(b||this.scroller).removeEventListener(a,this,!!d)},destroy:function(){this.scroller.style[g]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(O,a);this._unbind(P);this._unbind(J,a);this._unbind(B,a);this._unbind(H,
a);this.options.hasTouch||this._unbind(I);this.options.useTransition&&this._unbind(E);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a,b,c,e=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=d.round(this.scroller.offsetWidth*this.scale);
this.scrollerH=d.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&
this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];c=this.scroller.querySelectorAll(this.options.snap);a=0;for(b=c.length;a<b;a++)e=this._offset(c[a]),e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,this.pagesX[a]=e.left<this.maxScrollX?this.maxScrollX:e.left*this.scale,this.pagesY[a]=e.top<this.maxScrollY?this.maxScrollY:e.top*
this.scale}else if(this.options.snap){for(this.pagesX=[];e>=this.maxScrollX;)this.pagesX[b]=e,e-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);b=e=0;for(this.pagesY=[];e>=this.maxScrollY;)this.pagesY[b]=e,e-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");
this._scrollbar("v");this.zoomed||(this.scroller.style[k]="0",this._resetPos(400))},scrollTo:function(a,b,d,c){var e=a;this.stop();e.length||(e=[{x:a,y:b,time:d,relative:c}]);a=0;for(b=e.length;a<b;a++)e[a].relative&&(e[a].x=this.x-e[a].x,e[a].y=this.y-e[a].y),this.steps.push({x:e[a].x,y:e[a].y,time:e[a].time||0});this._startAni()},scrollToElement:function(a,b){var c;if(a=a.nodeType?a:this.scroller.querySelector(a))c=this._offset(a),c.left+=this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,c.left=
0<c.left?0:c.left<this.maxScrollX?this.maxScrollX:c.left,c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top,b=void 0===b?d.max(2*d.abs(c.left),2*d.abs(c.top)):b,this.scrollTo(c.left,c.top,b)},scrollToPage:function(a,b,c){c=void 0===c?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-
1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else if(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY)b=this.maxScrollY;this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(J,a);this._unbind(B,a);this._unbind(H,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(E):
R(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,c,d){var e=c/this.scale;this.options.useTransform&&(this.zoomed=!0,d=void 0===d?200:d,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=a-a*e+this.x,this.y=b-b*e+this.y,this.scale=c,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[k]=d+"ms",this.scroller.style[g]=
"translate("+this.x+"px,"+this.y+"px) scale("+c+")"+F,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};f=null;"undefined"!==typeof exports?exports.iScroll=q:a.iScroll=q})(window,document);
